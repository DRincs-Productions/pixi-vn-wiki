---
title: Animazione (motion)
description: Scopri come animare i componenti canvas di Pixi'VN utilizzando la funzione canvas.animate, inclusi esempi di movimento, rotazione, dissolvenza, zoom e mirroring.
---

import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';
import { MoveExample, RotateExample, FadeExample, ZoomExample, MirrorExample, SequenceExample, MotionSequenceExample } from "@/components/examples";

Pixi'VN consente agli sviluppatori di animare i componenti canvas utilizzando una funzione chiamata `animate`. This function is a re-implementation of the [`animate` function from the `motion` library](https://motion.dev/docs/animate), adapted to use PixiJS tickers for triggering animation events.

**What is `motion`?**\
`motion` is a popular JavaScript library that provides a simple and powerful way to create animations. Puoi leggere di più a riguardo [qui](https://motion.dev/).

Esistono due varianti di questa funzione:

- `animate`: Progettato per animare elementi PixiJS o Pixi'VN utilizzati per l'<DynamicLink href="/start/interface-pixijs">interfaccia utente</DynamicLink>. Pixi’VN non salva lo stato corrente delle animazioni create con questa funzione. Poiché è identico alla funzione animate di [motion](https://motion.dev/docs/animate), non verrà spiegata ulteriormente qui.
- `canvas.animate`: Progettato per animare i componenti canvas di Pixi'VN. It saves the current state of animations, allowing you to create transitions between different states of your game. Questa funzione presenta alcune differenze rispetto alla funzione originale `animate`, che verranno spiegate in dettaglio di seguito.

## Usage

The `canvas.animate` function works as follows:\
The developer defines a target state for the component (for example, its x-y position). Una volta avviata l'animazione, viene attivato continuamente un evento per aggiornare il componente finché non raggiunge lo stato desiderato. È possibile personalizzare ulteriormente l'animazione con varie opzioni.

Questa funzione ha i seguenti parametri:

- `components`: I componenti PixiJS da animare. Può trattarsi di un singolo componente, di un array di componenti o di una stringa che rappresenta l'<DynamicLink href="/start/canvas-alias">alias del componente</DynamicLink>.
- `keyframes`: The keyframes to animate the component(s) with. This is an object containing the properties to animate and their values at different points in time.
- `options` (Optional): Additional options for the animation, including duration, easing, and ticker. The following options extend those from `motion`:
  - `aliasToRemoveAfter` (Optional): An array of strings containing the aliases of the <DynamicLink href="/start/canvas-components">canvas components</DynamicLink> to remove after the animation completes.
  - `tickerIdToResume` (Optional): A string containing the ticker ID to resume after the animation completes.
  - `tickerAliasToResume` (Optional): If you want to resume tickers that were previously paused, provide the aliases of the canvas components whose tickers should be resumed.
  - `forceCompleteBeforeNext` (Optional): A boolean indicating whether the animation must complete before the next step of the game. If `true`, the game will force the animation to finish before proceeding.
- `priority` (Optional): The priority of the PixiJS ticker. This parameter sets the ticker's priority. The default is `UPDATE_PRIORITY.NORMAL`.

The function returns the ID of the ticker created to animate the component(s).

Here are some examples:

<Accordions>

<Accordion title="Move" id="move">

```ts tab="labels/startLabel.ts"
import { canvas, ImageSprite, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien"); // [!code focus]
        canvas.animate(alien, { xAlign: 1, yAlign: 0 }, { ease: "easeOut" }); // [!code focus]
    },
    () => canvas.animate<ImageSprite>("alien", { xAlign: 1, yAlign: 1 }, { ease: "backOut" }), // [!code focus]
    () => canvas.animate<ImageSprite>("alien", { xAlign: 0, yAlign: 1 }, { ease: "circIn" }), // [!code focus]
    () => canvas.animate<ImageSprite>("alien", { xAlign: 0, yAlign: 0 }, { ease: "linear" }), // [!code focus]
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<MoveExample />

</Accordion>

<Accordion title="Rotate" id="rotate">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5 }); // [!code focus]
        canvas.animate(alien, { angle: 360 }, { duration: 1, type: "spring", repeat: Infinity, repeatDelay: 0.2 }); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<RotateExample />

</Accordion>

<Accordion title="Fade" id="fade">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
  async () => {
    const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5, alpha: 0 }); // [!code focus]
    canvas.animate(alien, { alpha: 1 }, { ease: "linear", duration: 1 }); // [!code focus]
  },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<FadeExample />

</Accordion>

<Accordion title="Zoom" id="zoom">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5, scale: 0 }); // [!code focus]
        canvas.animate(alien, { scaleX: 1, scaleY: 1 }, { ease: "circInOut", duration: 1 }); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<ZoomExample />

</Accordion>

<Accordion title="Mirror" id="mirror">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5 }); // [!code focus]
        canvas.animate(alien, { scaleX: -1 }); // [!code focus]
    },
    () => canvas.animate("alien", { scaleX: 1 }), // [!code focus]
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<MirrorExample />

</Accordion>

</Accordions>

### Sequence

The `canvas.animate` function can also be used to create sequences of animations.

To create a sequence, you can pass arrays as property values in the keyframes object. In this case, you can use the [`times` property](https://motion.dev/docs/animate#times) to specify the timing of each keyframe.

Ad esempio:

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien"); // [!code focus]
        canvas.animate( // [!code focus]
            alien, // [!code focus]
            { // [!code focus]
                xAlign: [0, 1, 1, 0, 0], // [!code focus]
                yAlign: [0, 0, 1, 1, 0], // [!code focus]
            }, // [!code focus]
            { repeat: Infinity, duration: 10 } // [!code focus]
        ); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<SequenceExample />

#### Timeline sequences

<Callout type="warn">

This method has some limitations compared to the previous one, such as restrictions on the `repeat` property compared to the original `motion` library.

</Callout>

Another way to create animation sequences with `canvas.animate` is by using a [timeline](https://motion.dev/docs/animate#timeline-sequences). This is useful when you want to chain multiple animations that are not strictly linear. You can provide an array of keyframes, where each keyframe is an object with the properties to animate and their values, along with optional animation options.

Ad esempio:

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien"); // [!code focus]
        canvas.animate( // [!code focus]
            alien, // [!code focus]
            [ // [!code focus]
                [{ xAlign: 0, yAlign: 0 }, { ease: "circInOut" }], // [!code focus]
                [{ xAlign: 1, yAlign: 0 }, { ease: "backInOut" }], // [!code focus]
                [{ xAlign: 1, yAlign: 1 }, { ease: "linear" }], // [!code focus]
                [{ xAlign: 0, yAlign: 1 }, { ease: "anticipate" }], // [!code focus]
                [{ xAlign: 0, yAlign: 0 }, { ease: "easeOut" }], // [!code focus]
            ], // [!code focus]
            { repeat: 10, duration: 10 } // [!code focus]
        ); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<MotionSequenceExample />

## Methods

The `canvas.animate` function is built on Pixi’VN Tickers, so you can use all the <DynamicLink href="/start/canvas-tickers-functions">functions available to control Pixi’VN Tickers</DynamicLink>.
