---
title: åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè§†è§‰å°è¯´
description: ä½¿ç”¨ Pixiâ€™VN åˆ›å»ºè§†è§‰å°è¯´çš„åˆ†æ­¥æŒ‡å—ï¼Œæ¶µç›–é¡¹ç›®è®¾ç½®ã€å™äº‹ã€èµ„æºå’Œäº¤äº’æ€§ã€‚
---

import { TSVisualNovelExample } from "@/components/vn-examples";
import { InkVisualNovelExample } from "@/components/vn-ink-examples";

æœ¬æ•™ç¨‹å°†å¼•å¯¼ä½ å®Œæˆåˆ›å»ºç¬¬ä¸€ä¸ªè§†è§‰å°è¯´çš„æ•´ä¸ªè¿‡ç¨‹ã€‚

**ä»€ä¹ˆæ˜¯è§†è§‰å°è¯´ï¼Ÿ** è§†è§‰å°è¯´ï¼ˆVNï¼‰æ˜¯ä¸€ç§æ•°å­—äº¤äº’å¼è™šæ„ä½œå“å½¢å¼ã€‚ è§†è§‰å°è¯´é€šå¸¸ä¸ç”µå­æ¸¸æˆåª’ä»‹ç›¸å…³è”ï¼Œä½†å¹¶ä¸æ€»æ˜¯è¢«æ˜ç¡®å½’ç±»ä¸ºæ¸¸æˆã€‚ å®ƒç»“åˆäº†æ–‡æœ¬å™äº‹ã€é™æ€æˆ–åŠ¨ç”»æ’å›¾ï¼Œä»¥åŠä¸åŒç¨‹åº¦çš„äº¤äº’æ€§ã€‚ è¿™ç§å½¢å¼æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºã€Œnovel gameã€ï¼Œè¿™æ˜¯å¯¹å’Œåˆ¶è‹±è¯­ _noberu gÄ“mu_ï¼ˆãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ ï¼‰çš„è½¬å†™ï¼Œè€Œè¿™ä¸€ç§°å‘¼åœ¨æ—¥æœ¬æ›´ä¸ºå¸¸è§ã€‚

å‡ºäºæµ‹è¯•ç›®çš„ï¼Œåœ¨æœ¬æŒ‡å—ä¸­æˆ‘ä»¬å°†ä½¿ç”¨ Pixiâ€™VN å¤åˆ»è§†è§‰å°è¯´ [Breakdown](https://joshpowlison.itch.io/breakdown)ã€‚ Breakdown æ˜¯ä¸€ä¸ªçŸ­ç¯‡æ•…äº‹ï¼Œå…·å¤‡è§†è§‰å°è¯´åº”æœ‰çš„æ‰€æœ‰ç‰¹å¾ã€‚ Breakdown çš„ä½œè€… Josh Powlison å·²æˆæƒæˆ‘ä»¬å°†å…¶å™äº‹å†…å®¹ç”¨äºæ•™å­¦ç›®çš„ â¤ï¸ã€‚

ç”±äº Pixiâ€™VN å…è®¸ä½ é€šè¿‡é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ª <DynamicLink href="/start/narration">å¯ç”¨çš„å™äº‹è¯­è¨€</DynamicLink> æ¥ç¼–å†™è‡ªå·±çš„å™äº‹å†…å®¹ï¼Œå› æ­¤åœ¨æ¯ä¸ªå¼€å‘é˜¶æ®µï¼Œéƒ½ä¼šæä¾›å½“å‰æ‰€æœ‰å¯ç”¨è¯­è¨€çš„ç¤ºä¾‹ã€‚

## åˆ›å»ºæ–°é¡¹ç›®

ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚ æœ‰å…³å¦‚ä½•ä»æ¨¡æ¿åˆ›å»ºæ–°é¡¹ç›®çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <DynamicLink href="/start#project-initialization">è¿™é‡Œ</DynamicLink>ã€‚ æœ¬æŒ‡å—å°†ä½¿ç”¨ â€œVisual Novel - Reactâ€ æ¨¡æ¿ã€‚

`Visual Novel -> React`

é¡¹ç›®åˆ›å»ºå®Œæˆåï¼ŒåŠ¡å¿…é˜…è¯»ä½äºé¡¹ç›®æ ¹ç›®å½•ä¸­çš„ `README.md` æ–‡ä»¶ã€‚ è¯¥æ–‡ä»¶åŒ…å«æœ‰å…³é¡¹ç›®çš„é‡è¦ä¿¡æ¯ä»¥åŠä½¿ç”¨è¯´æ˜ã€‚

åœ¨æœ¬ä¾‹ä¸­ï¼Œå¯åŠ¨é¡¹ç›®åªéœ€æ‰§è¡Œæ‰€æä¾›çš„ç›¸å…³å‘½ä»¤å³å¯ï¼š

```bash
npm install
npm start
```

## åˆ›å»ºè§’è‰²

ç°åœ¨æˆ‘ä»¬å°†å®šä¹‰è¿™ä¸ªæ•…äº‹ä¸­çš„è§’è‰²ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä¼šåœ¨ `/values/characters.ts` æ–‡ä»¶ä¸­å®šä¹‰è¦ä½¿ç”¨çš„è§’è‰²ã€‚ æœ‰å…³å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨è§’è‰²çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼š<DynamicLink href="/start/character">Characters</DynamicLink>

`mc` è¡¨ç¤ºä»€ä¹ˆï¼Ÿ `mc` æ˜¯ â€œMain Characterï¼ˆä¸»è§’ï¼‰â€ çš„å¸¸è§ç¼©å†™ã€‚ åœ¨è§†è§‰å°è¯´ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ `mc` ä½œä¸ºä¸»è§’çš„åç§°ã€‚

```ts tab="values/characters.ts"
import { RegisteredCharacters } from "@drincs/pixi-vn";
import Character from "../models/Character";

export const mc = new Character('mc', {
    name: 'Me',
});

export const james = new Character('james', {
    name: 'James',
    color: "#0084ac"
});

export const steph = new Character('steph', {
    name: 'Steph',
    color: "#ac5900"
});

export const sly = new Character('sly', {
    name: 'Sly',
    color: "#6d00ac"
});

RegisteredCharacters.add([mc, james, steph, sly]);
```

```ts tab="App.tsx"
// Remember to import the character file at least once into your project. // [!code focus]
import "./values/characters"; // [!code focus]

export default function App() {
return // ...
}
```

## å™äº‹çš„åˆç¨¿

<Callout title="Markup" type="info">

æ‰€æœ‰æ¨¡æ¿éƒ½æ”¯æŒ <DynamicLink href="/start/markup-markdown">Markdown</DynamicLink> å’Œ <DynamicLink href="/start/markup-tailwindcss">Tailwind CSS</DynamicLink>ï¼Œå› æ­¤æˆ‘ä»¬å°†ä½¿ç”¨å®ƒä»¬æ¥ç¼–å†™å™äº‹å†…å®¹ã€‚

</Callout>

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ç¼–å†™è§†è§‰å°è¯´ <DynamicLink href="/start/narration">å™äº‹</DynamicLink> çš„ã€Œåˆç¨¿ã€ã€‚
æˆ‘ä»¬å°†åˆ›å»ºç¬¬ä¸€ä¸ªåä¸º `start` çš„ <DynamicLink href="/start/labels">`label`</DynamicLink>ï¼Œå®ƒå°†ä½œä¸ºæ¸¸æˆçš„èµ·ç‚¹ã€‚ éšåï¼Œå°±å¯ä»¥ç¼–å†™åœ¨è§†è§‰å°è¯´ä¸­å±•å¼€çš„ <DynamicLink href="/start/dialogue">dialogues</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
james: You're my roommate's replacement, huh?
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!
mc: ...

He thrusts out his hand.

james: James!
mc: ...Peter.

I take his hand and shake.

james: Ooh, Peter! Nice, firm handshake! The last quy always gave me the dead fish. I already think we'r gonna get along fine.
james: Come on in and... 
james: ...
james: I know you're both watching, come on out already!

sly: I just wanted to see what the new guy was like. Hey, you, Peter- be nice to our little brother, or you'll have to deal with *us*.
mc: ...
james: Peter, this is Sly. Yes, that is her real name.

I put out my hand.

sly: I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.
mc: Fair enough, I'm a pretty scary guy, or so l've been told.
james: The redhead behind her is Stephanie.
// Example of using Tailwind CSS
steph: <span class="inline-block motion-translate-y-loop-25">Hey</span>! Everyone calls me Steph. I'll shake your hand.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    () => narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` },
    () => narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => { narration.dialogue = "He thrusts out his hand." },
    () => narration.dialogue = { character: james, text: `James!` },
    () => narration.dialogue = { character: mc, text: `...Peter.` },
    () => { narration.dialogue = "I take his hand and shake." },
    () => narration.dialogue = { character: james, text: `Ooh, Peter! Nice, firm handshake! The last quy always gave me the dead fish. I already think we'r gonna get along fine.` },
    () => narration.dialogue = { character: james, text: `Come on in and...` },
    () => narration.dialogue = { character: james, text: `...` },
    () => narration.dialogue = { character: james, text: `I know you're both watching, come on out already!` },
    () => narration.dialogue = { character: james, text: `I just wanted to see what the new guy was like. Hey, you, Peter- be nice to our little brother, or you'll have to deal with *us*.` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => narration.dialogue = { character: james, text: `Peter, this is Sly. Yes, that is her real name.` },
    () => { narration.dialogue = "I put out my hand." },
    () => narration.dialogue = { character: james, text: `I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.` },
    () => narration.dialogue = { character: mc, text: `Fair enough, I'm a pretty scary guy, or so l've been told.` },
    () => narration.dialogue = { character: james, text: `The redhead behind her is Stephanie.` },
    // Example of using Tailwind CSS
    () => narration.dialogue = { character: steph, text: `<span class="inline-block motion-translate-y-loop-25">Hey</span>! Everyone calls me Steph. I'll shake your hand.` },
    // ...
]);
export default startLabel;
```

### å°†å™äº‹æ‹†åˆ†ä¸º `labels`

å³ä½¿æ˜¯çº¿æ€§çš„è§†è§‰å°è¯´ï¼Œä¹Ÿä¸å»ºè®®åˆ›å»ºè¿‡é•¿çš„ `labels`ã€‚ç›¸åï¼Œæ›´æ¨èåˆ›å»ºå¤šä¸ªè¾ƒå°çš„ `labels`ï¼Œå¹¶åœ¨éœ€è¦æ—¶é€šè¿‡ <DynamicLink href="/start/labels-flow">å™äº‹æµç¨‹æ§åˆ¶åŠŸèƒ½</DynamicLink> æ¥è°ƒç”¨å®ƒä»¬ã€‚

å› æ­¤ï¼Œå³ä¾¿åœ¨æœ¬ä¾‹ä¸­æ•…äº‹æ˜¯çº¿æ€§çš„ï¼Œä¹Ÿä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ª `labels`ï¼Œå¹¶ä½¿ç”¨ `start` ä¸ `second_part`ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
james: You're my roommate's replacement, huh?
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!
mc: ...

He thrusts out his hand.

james: James!
mc: ...Peter.

// ...
-> second_part

=== second_part ===

She enters my room before I'VE even had a chance to. \\n\\n...I could've just come back and gotten the platter later...
She sets it on a desk. I throw my two paper bags down beside the empty bed.

steph: They got you a new mattress, right? That last guy was a druggie, did James tell you that?
sly: *We're* the reason he got expelled!
steph: Sly! If word gets out about that... well, actually, it wouldn't matter, *he's* the one who shot himself up.

I'm fumbling for a new subject.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    () => narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` },
    () => narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => { narration.dialogue = "He thrusts out his hand." },
    () => narration.dialogue = { character: james, text: `James!` },
    () => narration.dialogue = { character: mc, text: `...Peter.` },
    // ...
    async (props) => await narration.jump(secondPart, props),
]);
export default startLabel;

const secondPart = newLabel("second_part", [
    () => { narration.dialogue = `She enters my room before I'VE even had a chance to. \n\n...I could've just come back and gotten the platter later...` },
    () => { narration.dialogue = `She sets it on a desk. I throw my two paper bags down beside the empty bed.` },
    () => narration.dialogue = { character: steph, text: `They got you a new mattress, right? That last guy was a druggie, did James tell you that?` },
    () => narration.dialogue = { character: sly, text: `*We're* the reason he got expelled!` },
    () => narration.dialogue = { character: steph, text: `Sly! If word gets out about that... well, actually, it wouldn't matter, *he's* the one who shot himself up.` },
    () => { narration.dialogue = `I'm fumbling for a new subject.` },
    // ...
]);
```

### åœ¨ dialogues ä¸­ä½¿ç”¨ â€œglueâ€ åŠŸèƒ½

åœ¨è§†è§‰å°è¯´ä¸­ï¼Œç»å¸¸éœ€è¦å°†æ–‡æœ¬ç²˜è´´åˆ°å½“å‰çš„ dialogue ä¸­ã€‚ ä¾‹å¦‚ï¼Œæš‚åœä¸€æ®µå¯¹è¯ï¼Œå¹¶åœ¨åç»­çš„ `step` ä¸­ç»§ç»­ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ <DynamicLink href="/start/dialogue#dialogue-glue">glue åŠŸèƒ½</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

james: Ooh, [mc]! Nice, firm handshake!
<>The last guy always gave me the dead fish.
<>I already think we're gonna get along fine.
james: Come on in and...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => narration.dialogue = { character: james, text: `Ooh, ${mc.name}! Nice, firm handshake!` },
    async () => {
        narration.dialogGlue = true
        narration.dialogue = `The last guy always gave me the dead fish.`
    },
    async () => {
        narration.dialogGlue = true
        narration.dialogue = `I already think we're gonna get along fine.`
    },
    async () => narration.dialogue = { character: james, text: `Come on in and...` },
    // ...
]);
export default startLabel;
```

## é€‰æ‹©èœå•

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¯¢é—®ç©å®¶æ˜¯å¦å¸Œæœ›ç»§ç»­æ¨è¿›è§†è§‰å°è¯´çš„åç»­å†…å®¹ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <DynamicLink href="/start/choices">é€‰æ‹©èœå•</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

You want continue to the next part?
* Yes, I want to continue
-> second_part
* No, I want to stop here
-> END

=== second_part ===

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => {
        narration.dialogue = `You want continue to the next part?`
        narration.choices = [
            newChoiceOption("Yes, I want to continue", secondPart, {}, { type: "jump" }),
            newCloseChoiceOption("No, I want to stop here"),
        ]
    },
]);
export default startLabel;

const secondPart = newLabel("second_part", [
    // ...
]);
```

## ç¼–è¾‘è§’è‰²ä¿¡æ¯å¹¶å°†å…¶ä½œä¸ºå˜é‡ä½¿ç”¨

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å…è®¸ç©å®¶ä¿®æ”¹ `mc` çš„åå­—ã€‚

ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä¼šè®©ç©å®¶é€šè¿‡ Pixiâ€™VN æä¾›çš„åŠŸèƒ½ <DynamicLink href="/start/input">åœ¨è¾“å…¥æ¡†ä¸­å¡«å†™å†…å®¹</DynamicLink>ã€‚

åœ¨è·å–è¾“å…¥çš„å€¼ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨è¯¥å€¼æ¥ <DynamicLink href="/start/character#edit">è®¾ç½®è§’è‰²åç§°</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

He thrusts out his hand.
# request input type string default Peter
What is your name?
# rename mc { _input_value_ }

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    () => { narration.dialogue = `He thrusts out his hand.` },
    () => {
        narration.requestInput({ type: "string" }, "Peter")
        narration.dialogue = `What is your name?`
    },
    () => {
        mc.name = narration.inputValue as string
    },
    // ...
]);
export default startLabel;
```

éšåï¼Œå°±å¯ä»¥åœ¨å¯¹è¯ä¸­ <DynamicLink href="/start/character#use">ä½¿ç”¨è§’è‰²åç§°</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
VAR steph_fullname = "Stephanie"

=== start ===
// ...

sly: I just wanted to see what the new guy was like. Hey, you, [mc]- be nice to our little brother, or you'll have to deal with *us*.
mc: ...
james: [mc], this is [sly]. Yes, that is her real name.

I put out my hand.

sly: I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.
mc: Fair enough, I'm a pretty scary guy, or so l've been told.
james: The redhead behind her is [steph_fullname].
steph: Hey! Everyone calls me [steph]. I'll shake your hand.

She puts out her hand, and I take it.

mc: Thanks, good to meet you, [steph_fullname].
steph: WOW, that is, like, the most perfect handshake I've ever had! Firm, but also gentle. [sly], you *gotta* shake his hand!

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const steph_fullname = "Stephanie";

const startLabel = newLabel("start", [
    // ...
    () => narration.dialogue = { character: sly, text: `I just wanted to see what the new guy was like. Hey, you, ${mc.name}- be nice to our little brother, or you'll have to deal with *us*.` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => narration.dialogue = { character: james, text: `${mc.name}, this is ${sly.name}. Yes, that is her real name.` },
    () => { narration.dialogue = `I put out my hand.` },
    () => narration.dialogue = { character: sly, text: `I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.` },
    () => narration.dialogue = { character: mc, text: `Fair enough, I'm a pretty scary guy, or so I've been told.` },
    () => narration.dialogue = { character: james, text: `The redhead behind her is ${steph_fullname}.` },
    () => narration.dialogue = { character: steph, text: `Hey! Everyone calls me ${steph.name}. I'll shake your hand.` },
    () => { narration.dialogue = `She puts out her hand, and I take it.` },
    () => narration.dialogue = { character: mc, text: `Thanks, good to meet you, ${steph_fullname}.` },
    () => narration.dialogue = { character: steph, text: `WOW, that is, like, the most perfect handshake I've ever had! Firm, but also gentle. ${sly.name}, you *gotta* shake his hand!` },
    // ...
]);
export default startLabel;
```

## å®šä¹‰å¹¶åŠ è½½èµ„æº

<Callout type="info">

è¦åŠ è½½å’Œæ“ä½œèµ„æºï¼ˆå›¾ç‰‡ã€GIFã€è§†é¢‘ç­‰ï¼‰ï¼Œ éœ€è¦ä½¿ç”¨ `Assets`ã€‚ `Assets` æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ç±»ï¼Œæ¥è‡ª PixiJS åº“ã€‚å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [è¿™é‡Œ](https://pixijs.com/8.x/guides/components/assets)ã€‚

</Callout>

ç¬¬ä¸€æ­¥ä¹‹ä¸€æ˜¯é€‰æ‹©ç”¨äºä¿å­˜è§†è§‰å°è¯´èµ„æºçš„ä½ç½®ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†èµ„æºä¿å­˜åˆ° Firebase Storageï¼ˆä¸€ç§æ‰˜ç®¡æœåŠ¡ï¼‰ã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„ä½ å–œæ¬¢çš„æ‰˜ç®¡æœåŠ¡ï¼Œæˆ–è€…å°†èµ„æºæœ¬åœ°ä¿å­˜åœ¨é¡¹ç›®ä¸­ã€‚æ›´å¤šä¿¡æ¯è¯·å‚é˜… <DynamicLink href="/start/assets">è¿™é‡Œ</DynamicLink>ã€‚

åœ¨ä½¿ç”¨èµ„æºä¹‹å‰ï¼Œå¼ºçƒˆå»ºè®®å…ˆ <DynamicLink href="/start/assets-management#initialize-the-asset-matrix-at-project-start">åˆå§‹åŒ–èµ„æºçŸ©é˜µ</DynamicLink>ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚ `assets/manifest.ts` æ–‡ä»¶æ‰€ç¤ºï¼Œ`onLoadingLabel` ä¸­çš„æ‰€æœ‰æ¨¡æ¿éƒ½ä¼šå°è¯•åœ¨åå°åŠ è½½åˆ«åç­‰äºå½“å‰ `label` id çš„ â€œbundle assetsâ€ã€‚ å› æ­¤ï¼Œå»ºè®®åœ¨ `manifest` ä¸­ä¸ºæ¯ä¸ª `label` æ·»åŠ ä¸€ä¸ªä¸è¯¥ `label` id åŒåçš„ â€œbundle assetsâ€ï¼Œå¹¶åŒ…å«è¯¥ `label` ä¸­ä½¿ç”¨çš„å›¾ç‰‡ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";
import { MAIN_MENU_ROUTE } from "../constans";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        // screens
        {
            name: MAIN_MENU_ROUTE,
            assets: [
                {
                    alias: "background_main_menu",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/main-menu.png",
                },
            ],
        },
        // labels
        {
            name: "start",
            assets: [
                {
                    alias: "bg01-hallway",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/bg01-hallway.webp",
                },
            ],
        },
        {
            name: "second_part",
            assets: [
                {
                    alias: "bg02-dorm",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/bg02-dorm.webp",
                },
            ],
        },
        // characters
        {
            name: "fm01",
            assets: [
                {
                    alias: "fm01-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-body.webp",
                },
                {
                    alias: "fm01-eyes-grin",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-grin.webp",
                },
                {
                    alias: "fm01-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-smile.webp",
                },
                {
                    alias: "fm01-eyes-soft",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-soft.webp",
                },
                {
                    alias: "fm01-eyes-upset",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-upset.webp",
                },
                {
                    alias: "fm01-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-wow.webp",
                },
                {
                    alias: "fm01-mouth-grin00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-grin00.webp",
                },
                {
                    alias: "fm01-mouth-serious00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-serious00.webp",
                },
                {
                    alias: "fm01-mouth-serious01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-serious01.webp",
                },
                {
                    alias: "fm01-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-smile00.webp",
                },
                {
                    alias: "fm01-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-smile01.webp",
                },
                {
                    alias: "fm01-mouth-soft00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-soft00.webp",
                },
                {
                    alias: "fm01-mouth-soft01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-soft01.webp",
                },
                {
                    alias: "fm01-mouth-upset00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-upset00.webp",
                },
                {
                    alias: "fm01-mouth-upset01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-upset01.webp",
                },
                {
                    alias: "fm01-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-wow01.webp",
                },
            ],
        },
        {
            name: "fm02",
            assets: [
                {
                    alias: "fm02-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-body.webp",
                },
                {
                    alias: "fm02-eyes-bawl",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-bawl.webp",
                },
                {
                    alias: "fm02-eyes-joy",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-joy.webp",
                },
                {
                    alias: "fm02-eyes-nervous",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-nervous.webp",
                },
                {
                    alias: "fm02-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-smile.webp",
                },
                {
                    alias: "fm02-eyes-upset",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-upset.webp",
                },
                {
                    alias: "fm02-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-wow.webp",
                },
                {
                    alias: "fm02-mouth-cry01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-cry01.webp",
                },
                {
                    alias: "fm02-mouth-nervous00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-nervous00.webp",
                },
                {
                    alias: "fm02-mouth-nervous01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-nervous01.webp",
                },
                {
                    alias: "fm02-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-smile00.webp",
                },
                {
                    alias: "fm02-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-smile01.webp",
                },
                {
                    alias: "fm02-mouth-upset00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-upset00.webp",
                },
                {
                    alias: "fm02-mouth-upset01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-upset01.webp",
                },
                {
                    alias: "fm02-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-wow01.webp",
                },
            ],
        },
        {
            name: "m01",
            assets: [
                {
                    alias: "m01-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-body.webp",
                },
                {
                    alias: "m01-eyes-annoy",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-annoy.webp",
                },
                {
                    alias: "m01-eyes-concern",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-concern.webp",
                },
                {
                    alias: "m01-eyes-cry",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-cry.webp",
                },
                {
                    alias: "m01-eyes-grin",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-grin.webp",
                },
                {
                    alias: "m01-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-smile.webp",
                },
                {
                    alias: "m01-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-wow.webp",
                },
                {
                    alias: "m01-mouth-annoy00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-annoy00.webp",
                },
                {
                    alias: "m01-mouth-annoy01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-annoy01.webp",
                },
                {
                    alias: "m01-mouth-concern00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-concern00.webp",
                },
                {
                    alias: "m01-mouth-concern01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-concern01.webp",
                },
                {
                    alias: "m01-mouth-cry00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-cry00.webp",
                },
                {
                    alias: "m01-mouth-cry01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-cry01.webp",
                },
                {
                    alias: "m01-mouth-grin00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-grin00.webp",
                },
                {
                    alias: "m01-mouth-neutral00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-neutral00.webp",
                },
                {
                    alias: "m01-mouth-neutral01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-neutral01.webp",
                },
                {
                    alias: "m01-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-smile00.webp",
                },
                {
                    alias: "m01-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-smile01.webp",
                },
                {
                    alias: "m01-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-wow01.webp",
                },
            ],
        },
    ],
};
export default manifest;
```

```ts tab="utils/defineAssets.ts"
import { Assets } from "@drincs/pixi-vn";
import manifest from "../assets/manifest";

/**
 * Define all the assets that will be used in the game.
 * This function will be called before the game starts.
 * You can read more about assets management in the documentation: https://pixi-vn.web.app/start/assets-management.html
 */
export async function defineAssets() {
    await Assets.init({ manifest });

    // The game will not start until these asserts are loaded.
    await Assets.loadBundle("main_menu");

    // The game will start immediately, but these asserts will be loaded in the background.
    // Assets.backgroundLoadBundle("main_menu");
    // Assets.backgroundLoad("background_main_menu");
}
```

```ts tab="src/main.ts"
import { Assets, canvas, Container, Game } from "@drincs/pixi-vn";
import { createRoot } from "react-dom/client";
import App from "./App";
import { CANVAS_UI_LAYER_NAME } from "./constans";
import "./index.css";
import "./values/characters";

// ...

Game.onLoadingLabel((_stepId, { id }) => { // [!code focus]
    Assets.backgroundLoadBundle(id); // [!code focus]
}); // [!code focus]
```

## æ·»åŠ èƒŒæ™¯å’Œè§’è‰²å›¾ç‰‡

ç°åœ¨æ˜¯æ—¶å€™è€ƒè™‘è§†è§‰éƒ¨åˆ†äº†ã€‚ æˆ‘ä»¬å°†èƒŒæ™¯å’Œè§’è‰²ç²¾çµæ·»åŠ åˆ°è§†è§‰å°è¯´çš„ç”»å¸ƒä¸­ã€‚

**ä»€ä¹ˆæ˜¯ç²¾çµï¼ˆspriteï¼‰ï¼Ÿ** åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­ï¼Œç²¾çµæ˜¯ä¸€ä¸ªäºŒç»´ä½å›¾ï¼Œé€šå¸¸è¢«é›†æˆåˆ°æ›´å¤§çš„åœºæ™¯ä¸­ï¼Œæœ€å¸¸è§äº 2D è§†é¢‘æ¸¸æˆã€‚

åœ¨æœ¬ä¾‹ä¸­ï¼Œè§’è‰²ç²¾çµç”± 3 å¼ å›¾ç‰‡ç»„æˆï¼šèº«ä½“ã€çœ¼ç›å’Œå˜´å·´ã€‚ ç„¶åæˆ‘ä»¬ä½¿ç”¨ <DynamicLink href="/start/canvas-image-container">ImageContainer</DynamicLink> æ¥ç»„åˆè§’è‰²ã€‚ æœ‰å…³æ·»åŠ ç”»å¸ƒç»„ä»¶çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <DynamicLink href="/start/canvas-components">æ­¤æ–‡æ¡£</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    async () => {
        await showImage("bg", "bg01-hallway");
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-neutral01"], { xAlign: 0.5, yAlign: 1 });
        narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` }
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-smile01"])
        narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!` }
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-grin00"])
        narration.dialogue = { character: mc, text: `...` }
    },
    // ...
]);
export default startLabel;
```

## æ™ºèƒ½èµ„æºåŠ è½½

åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¸¸æˆå›¾ç‰‡ä¿å­˜åœ¨æ‰˜ç®¡æœåŠ¡ï¼ˆFirebaseï¼‰ä¸Šã€‚ å› æ­¤ï¼Œèµ„æºåŠ è½½å¹¶ä¸æ˜¯å³æ—¶çš„ã€‚

ä¸ºäº†é¿å…ç©å®¶æ„ŸçŸ¥åˆ°è¿‡å¤šçš„åŠ è½½è¿‡ç¨‹ï¼Œæˆ‘ä»¬åº”å½“åœ¨æ¸¸æˆçš„ç‰¹å®šé˜¶æ®µå¯¹èµ„æºè¿›è¡Œåˆ†ç»„åŠ è½½ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä¼šåœ¨ `label` å¼€å§‹æ—¶åŠ è½½æœ€å¸¸ç”¨çš„å›¾ç‰‡ã€‚

æœ‰å…³å¦‚ä½•ç®¡ç†åŠ è½½çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <DynamicLink href="/start/assets-management">è¿™é‡Œ</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
# lazyload bundle m01 fm01 fm02 // [!code focus]

# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1 with movein direction right speed 300
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
], {
    onLoadingLabel: () => { // [!code focus]
        Assets.backgroundLoadBundle(["fm01", "fm02", "m01"]); // [!code focus]
    } // [!code focus]
});
export default startLabel;
```

## ä½¿ç”¨è¿‡æ¸¡æ•ˆæœ

ä¸ºäº†è®©è§†è§‰å°è¯´æ›´åŠ ç”ŸåŠ¨ï¼Œå¯ä»¥åœ¨æ˜¾ç¤ºå›¾ç‰‡æ—¶ä½¿ç”¨è¿‡æ¸¡æ•ˆæœã€‚ æœ‰å…³å¦‚ä½•ä½¿ç”¨è¿‡æ¸¡æ•ˆæœçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <DynamicLink href="/start/canvas-transition">è¿™é‡Œ</DynamicLink>ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1 with movein direction right speed 300
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    async () => {
        await showImage("bg", "bg01-hallway");
        await moveIn(
            "james",
            {
                value: ["m01-body", "m01-eyes-smile", "m01-mouth-neutral01"],
                options: { xAlign: 0.5, yAlign: 1 },
            },
            { direction: "right", ease: "circInOut", type: "spring" }
        );
        narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` };
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-smile01"]);
        narration.dialogue = {
            character: james,
            text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!`,
        };
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-grin00"]);
        narration.dialogue = { character: mc, text: `...` };
    },
    // ...
]);
export default startLabel;
```

## æ„å»ºåŠ¨ç”»

ä¸ºäº†è®©è§†è§‰å°è¯´æ›´åŠ ç”ŸåŠ¨ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨ç”»ã€‚ æœ‰å…³å¦‚ä½•ä½¿ç”¨åŠ¨ç”»çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <DynamicLink href="/start/canvas-animations-effects">è¿™é‡Œ</DynamicLink>ã€‚

å¦‚æœéœ€è¦è®¾ç½®å¤§é‡å±æ€§ï¼Œå»ºè®®ä½¿ç”¨ TypeScriptï¼Œå› ä¸ºå®ƒå¯ä»¥æä¾›æ›´å¼ºçš„æ§åˆ¶èƒ½åŠ›ã€æ›´å¤šåŠŸèƒ½ä»¥åŠç±»å‹åé¦ˆã€‚

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒåŠ¨ç”»ä¼šå°† `steph` ç§»å‡ºåœºæ™¯ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ª `step` ä¸­é‡æ–°æ’å…¥ã€‚ åŒæ—¶ï¼Œæˆ‘è¿˜ä¼šåœ¨ x è½´æ–¹å‘å¯¹å¥¹è¿›è¡Œé•œåƒå¤„ç†ï¼Œä»¥ç¡®ä¿è§’è‰²æœå‘æ­£ç¡®ã€‚

ä¸ºäº†å°† `steph` ç§»å‡º/ç§»å…¥åœºæ™¯ï¼Œæˆ‘ä¼šä½¿ç”¨ `moveOut` å’Œ `moveIn` å‡½æ•°ã€‚ é•œåƒæ•ˆæœåˆ™é€šè¿‡ `canvas.animate` å‡½æ•°å®ç°ã€‚

é¦–å…ˆï¼Œæˆ‘ä½¿ç”¨ `canvas.animate` åˆ›å»ºä¸€ä¸ªåŠ¨ç”»ï¼Œå°† `scaleX` å±æ€§ä» `-1`ï¼ˆé•œåƒï¼‰å˜åŒ–åˆ° `1`ï¼Œå¹¶è®¾ç½® `autoplay: false`ï¼Œä½¿å…¶ä¸ä¼šç«‹å³æ’­æ”¾ã€‚

ç„¶åï¼Œæˆ‘ä½¿ç”¨ `moveIn` å‡½æ•°å°† `steph` ç§»å…¥åœºæ™¯ï¼Œå¹¶ä¼ å…¥è¯¥åŠ¨ç”»çš„ `tickerId`ï¼Œä»¥ä¾¿åœ¨è¿‡æ¸¡å®Œæˆåç»§ç»­æ’­æ”¾åŠ¨ç”»ã€‚

æˆ‘ä½¿ç”¨ `completeOnContinue: true` é€‰é¡¹æ¥ç¡®ä¿åŠ¨ç”»åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ª `step` ä¹‹å‰å®Œæˆã€‚ å¯¹äºä½œä¸ºè¿‡æ¸¡çš„ `moveIn`ï¼Œ`completeOnContinue` é»˜è®¤å°±æ˜¯ trueã€‚

ç”±äºè¯¥åŠ¨ç”»ä½¿ç”¨ TypeScript ç¼–å†™ï¼Œæˆ‘ä¸ºå…¶åˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„ `label`ï¼Œä»¥ä¾¿ä¹Ÿå¯ä»¥ä»å…¶ä»–è¯­è¨€ä¸­è°ƒç”¨ã€‚

```ts title="labels/animation01.ts"
import { canvas, ImageContainer, moveIn, newLabel } from "@drincs/pixi-vn";

export const animation01 = newLabel("animation_01", [
    async () => {
        let tickerId = canvas.animate<ImageContainer>(
            "steph",
            {
                scaleX: 1,
            },
            { autoplay: false, completeOnContinue: true }
        );

        await moveIn(
            "steph",
            {
                value: ["fm02-body", "fm02-eyes-joy", "fm02-mouth-smile01"],
                options: { xAlign: 0.8, yAlign: 1, scale: { y: 1, x: -1 }, anchor: 0.5 },
            },
            { direction: "right", ease: "easeInOut", tickerIdToResume: tickerId }
        );
    },
]);
```

<Callout type="info" title="ink">

å¦‚ <DynamicLink href="/ink/labels#use-the-call-script">è¿™é‡Œ</DynamicLink> æ‰€è¿°ï¼Œå¯ä»¥ä» _ink_ è°ƒç”¨ç”¨ JS/TS ç¼–å†™çš„ `labels`ï¼Œåä¹‹äº¦ç„¶ã€‚

</Callout>

ç°åœ¨ï¼Œä½ å¯ä»¥ä»ä¸» `label`ï¼ˆ`start`ï¼‰ä¸­è°ƒç”¨è¿™ä¸ª `label`ï¼ˆ`animation_01`ï¼‰ã€‚

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-grin00]
# show imagecontainer sly [fm01-body fm01-eyes-smile fm01-mouth-smile00]
# show imagecontainer steph [fm02-body fm02-eyes-upset fm02-mouth-nervous00]
# remove image steph with moveout direction left speed 300
[steph_fullname] goes through the opposite door,
# call animation_01
<> and returns with a HUGE tinfoil-covered platter.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-grin00"]);
        await showImageContainer("sly", ["fm01-body", "fm01-eyes-smile", "fm01-mouth-smile00"]);
        await showImageContainer("steph", ["fm02-body", "fm02-eyes-upset", "fm02-mouth-nervous00"]);
        moveOut("steph", { direction: "left", speed: 300 });
        narration.dialogue = `${steph_fullname} goes through the opposite door,`;
    },
    async (props) => {
        narration.dialogGlue = true;
        narration.dialogue = ` and returns with a HUGE tinfoil-covered platter.`;
        await narration.call(animation01, props);
    },
    // ...
]);
export default startLabel;
```

<Comments>

## Add music and sound effects

This page is under construction.

:::tabs

== ink example

```ink title="ink"

```

== Typescript example

```ts

```

::: -->

</Comments>

## Conclusion

ç°åœ¨ï¼Œä½ å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Pixiâ€™VN åˆ›å»ºè§†è§‰å°è¯´ã€‚ èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ï¼Œè¯·æ˜æ™ºåœ°ä½¿ç”¨å®ƒï¼Œåˆ›ä½œä¸€ä¸ªç²¾å½©çš„æ•…äº‹å§ï¼ ğŸš€

ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨æœ€å° UIï¼ˆHTMLï¼‰çš„äº¤äº’å¼ç¤ºä¾‹ã€‚ å‘ä¸‹æ»šåŠ¨åï¼Œä½ å¯ä»¥çœ‹åˆ°ä½¿ç”¨å®Œæ•´ UIï¼ˆReact æ¨¡æ¿ï¼‰å®ç°çš„ç›¸åŒç»“æœã€‚

<Tabs items={["ink", "Typescript"]} groupId="narrative_language">
<Tab>
<InkVisualNovelExample />
</Tab>
<Tab>
<TSVisualNovelExample />
</Tab>
</Tabs>

<iframe src="https://pixi-vn-react-template.web.app/"
    title="Visual Novel - React"
    style={{
        width: "100%",
        height: "400px",
        border: "0",
        borderRadius: "4px",
        overflow: "hidden",
    }}
    allowFullScreen={true}
></iframe>
