---
title: Animate (motion)
---
import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';
import { MoveExample, RotateExample, FadeExample, ZoomExample, MirrorExample, SequenceExample, MotionSequenceExample } from "@/components/examples";

Pixi’VN allows developers to animate canvas components using a function called `animate`. This function is a re-implementation of the [animate function from the motion library](https://motion.dev/docs/animate), adapted to use PixiJS tickers for triggering animation events.

**What is motion?**  
`motion` is a popular JavaScript library that provides a simple and powerful way to create animations. You can read more about it [here](https://motion.dev/).

There are two variants of this function:

* `animate`: Intended for animating PixiJS or Pixi’VN elements used for <DynamicLink href="/start/interface-pixijs">UI</DynamicLink>. Pixi’VN does not save the current state of animations created with this function. Since it is identical to [motion’s animate function](https://motion.dev/docs/animate), it will not be explained further here.
* `canvas.animate`: Designed for animating Pixi’VN canvas components. It saves the current state of animations, allowing you to create transitions between different states of your game. This function has some differences from the original `animate` function, which will be explained in detail below.

## Usage

The `canvas.animate` function works as follows:  
The developer defines a target state for the component (for example, its x-y position). Once the animation starts, an event is continuously triggered to update the component until it reaches the desired state. You can further customize the animation with various options.

This function accepts the following parameters:

* `components`: The PixiJS component(s) to animate. This can be a single component, an array of components, or a string representing the <DynamicLink href="/start/canvas-alias">component's alias</DynamicLink>.
* `keyframes`: The keyframes to animate the component(s) with. This is an object containing the properties to animate and their values at different points in time.
* `options`: Additional options for the animation, including duration, easing, and ticker. The following options extend those from `motion`:
  * `aliasToRemoveAfter` (Optional): An array of strings containing the aliases of the <DynamicLink href="/start/canvas-components">canvas components</DynamicLink> to remove after the animation completes.
  * `tickerIdToResume` (Optional): A string containing the ticker ID to resume after the animation completes.
  * `tickerAliasToResume` (Optional): If you want to resume tickers that were previously paused, provide the aliases of the canvas components whose tickers should be resumed.
  * `forceCompleteBeforeNext` (Optional): A boolean indicating whether the animation must complete before the next step of the game. If `true`, the game will force the animation to finish before proceeding.
* `priority`: The priority of the PixiJS ticker. This optional parameter sets the ticker's priority. The default is `UPDATE_PRIORITY.NORMAL`.

The function returns the ID of the ticker created to animate the component(s).

> **Note:**  
> In Pixi’VN, a **label** is a named sequence of steps (actions or animations) that define a part of your game's flow. A **step** is a single action or animation within a label.

Here are some examples:

<Accordions>

<Accordion title="Move" id="move">

```ts tab="labels/startLabel.ts"
import { canvas, ImageSprite, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien"); // [!code focus]
        canvas.animate(alien, { xAlign: 1, yAlign: 0 }, { ease: "easeOut" }); // [!code focus]
    },
    () => canvas.animate<ImageSprite>("alien", { xAlign: 1, yAlign: 1 }, { ease: "backOut" }), // [!code focus]
    () => canvas.animate<ImageSprite>("alien", { xAlign: 0, yAlign: 1 }, { ease: "circIn" }), // [!code focus]
    () => canvas.animate<ImageSprite>("alien", { xAlign: 0, yAlign: 0 }, { ease: "linear" }), // [!code focus]
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<MoveExample />

</Accordion>

<Accordion title="Rotate" id="rotate">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5 }); // [!code focus]
        canvas.animate(alien, { angle: 360 }, { duration: 1, type: "spring", repeat: Infinity, repeatDelay: 0.2 }); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<RotateExample />

</Accordion>

<Accordion title="Fade" id="fade">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
  async () => {
    const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5, alpha: 0 }); // [!code focus]
    canvas.animate(alien, { alpha: 1 }, { ease: "linear", duration: 1 }); // [!code focus]
  },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<FadeExample />

</Accordion>

<Accordion title="Zoom" id="zoom">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5, scale: 0 }); // [!code focus]
        canvas.animate(alien, { scaleX: 1, scaleY: 1 }, { ease: "circInOut", duration: 1 }); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<ZoomExample />

</Accordion>

<Accordion title="Mirror" id="mirror">

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien", "alien", { align: 0.5, anchor: 0.5 }); // [!code focus]
        canvas.animate(alien, { scaleX: -1 }); // [!code focus]
    },
    () => canvas.animate("alien", { scaleX: 1 }), // [!code focus]
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<MirrorExample />

</Accordion>

</Accordions>

### Sequence

The `canvas.animate` function can also be used to create a sequence of animations.

To create a sequence, you can pass an array of properties in the keyframes. In this case you can use the [`times` property](https://motion.dev/docs/animate#times) to specify the duration of each keyframe.

For example:

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien"); // [!code focus]
        canvas.animate( // [!code focus]
            alien, // [!code focus]
            { // [!code focus]
                xAlign: [0, 1, 1, 0, 0], // [!code focus]
                yAlign: [0, 0, 1, 1, 0], // [!code focus]
            }, // [!code focus]
            { repeat: Infinity, duration: 10 } // [!code focus]
        ); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<SequenceExample />

#### Timeline sequences

<Callout type="warning">

This method has some limitations compared to the previous one related to the `motion` library, for example the `repeat` property has a limit.

</Callout>

There are another way to create sequences using the `canvas.animate` function, which is to use a [timeline](https://motion.dev/docs/animate#timeline-sequences). This is useful when you want to create a sequence of animations that are not necessarily linear. Using an array of keyframes, where each keyframe is an object that contains the properties to animate and their values at different points in time.

For example:

```ts tab="labels/startLabel.ts"
import { canvas, newLabel, showImage } from "@drincs/pixi-vn";

export const startLabel = newLabel("start_label", [
    async () => {
        const alien = await showImage("alien"); // [!code focus]
        canvas.animate( // [!code focus]
            alien, // [!code focus]
            [ // [!code focus]
                [{ xAlign: 0, yAlign: 0 }, { ease: "circInOut" }], // [!code focus]
                [{ xAlign: 1, yAlign: 0 }, { ease: "backInOut" }], // [!code focus]
                [{ xAlign: 1, yAlign: 1 }, { ease: "linear" }], // [!code focus]
                [{ xAlign: 0, yAlign: 1 }, { ease: "anticipate" }], // [!code focus]
                [{ xAlign: 0, yAlign: 0 }, { ease: "easeOut" }], // [!code focus]
            ], // [!code focus]
            { repeat: 10, duration: 10 } // [!code focus]
        ); // [!code focus]
    },
]);
```

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        {
            name: "start",
            assets: [
                {
                    alias: "alien",
                    src: "https://pixijs.com/assets/eggHead.png",
                },
            ],
        },
    ],
};
export default manifest;
```

<MotionSequenceExample />

## Methods

`canvas.animate` function was created using Pixi’VN Tickers, so you can use all the <DynamicLink href="/start/canvas-tickers-functions">functions used to control Pixi’VN Tickers</DynamicLink>.
