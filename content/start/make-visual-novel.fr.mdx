---
title: Cr√©er votre premier visual novel
description: Guide √©tape par √©tape pour cr√©er un visual novel avec Pixi‚ÄôVN, couvrant la configuration du projet, la narration, les ressources et l‚Äôinteractivit√©.
---

import { TSVisualNovelExample } from "@/components/vn-examples";
import { InkVisualNovelExample } from "@/components/vn-ink-examples";

Ce tutoriel vous guidera tout au long du processus de cr√©ation de votre premier visual novel.

**Qu‚Äôest-ce qu‚Äôun visual novel ?** Un visual novel (VN) est une forme de fiction interactive num√©rique. Les visual novels sont souvent associ√©s au m√©dia du jeu vid√©o, mais ne sont pas toujours class√©s comme tels. Ils combinent une narration textuelle avec des illustrations statiques ou anim√©es, ainsi qu‚Äôun degr√© variable d‚Äôinteractivit√©. Ce format est parfois appel√© ¬´ novel game ¬ª, une retranscription du terme wasei-eigo _noberu gƒìmu_ („Éé„Éô„É´„Ç≤„Éº„É†), qui est plus couramment utilis√© au Japon.

√Ä des fins de test, dans ce guide, nous recr√©erons le visual novel [Breakdown](https://joshpowlison.itch.io/breakdown) en utilisant Pixi‚ÄôVN. Breakdown est une courte histoire qui poss√®de toutes les caract√©ristiques qu‚Äôun visual novel devrait avoir. Josh Powlison, le cr√©ateur de Breakdown, nous a autoris√©s √† utiliser sa narration √† des fins p√©dagogiques ‚ù§Ô∏è.

Puisque Pixi‚ÄôVN vous permet d‚Äô√©crire votre propre narration en choisissant une ou plusieurs <DynamicLink href="/start/narration">langues narratives disponibles</DynamicLink>, des exemples seront fournis pour chaque langue actuellement disponible √† chaque √©tape du d√©veloppement.

## Cr√©er un nouveau projet

La premi√®re √©tape consiste √† cr√©er un nouveau projet. Vous pouvez trouver plus d‚Äôinformations sur la cr√©ation d‚Äôun projet √† partir d‚Äôun mod√®le <DynamicLink href="/start#project-initialization">ici</DynamicLink>. Dans ce guide, nous utiliserons le mod√®le ¬´ Visual Novel - React ¬ª.

`Visual Novel -> React`

Une fois la cr√©ation termin√©e, il est tr√®s important de lire le fichier `README.md` situ√© √† la racine du projet. Ce fichier contient des informations essentielles sur le projet et sur son utilisation.

Dans notre cas, pour d√©marrer le projet, il suffira d‚Äôex√©cuter les commandes indiqu√©es:

```bash
npm install
npm start
```

## Cr√©ation des personnages

Nous allons maintenant d√©finir les personnages de cette histoire. Pour cela, les personnages utilis√©s seront d√©finis dans le fichier `/values/characters.ts`. Pour plus d‚Äôinformations sur la cr√©ation et l‚Äôutilisation des personnages, vous pouvez consulter : <DynamicLink href="/start/character">Characters</DynamicLink>

Que signifie `mc`? `mc` est une abr√©viation courante de ¬´ Main Character ¬ª. Il est courant, dans les visual novels, d‚Äôutiliser `mc` comme nom du personnage principal.

```ts tab="values/characters.ts"
import { RegisteredCharacters } from "@drincs/pixi-vn";
import Character from "../models/Character";

export const mc = new Character('mc', {
    name: 'Me',
});

export const james = new Character('james', {
    name: 'James',
    color: "#0084ac"
});

export const steph = new Character('steph', {
    name: 'Steph',
    color: "#ac5900"
});

export const sly = new Character('sly', {
    name: 'Sly',
    color: "#6d00ac"
});

RegisteredCharacters.add([mc, james, steph, sly]);
```

```ts tab="App.tsx"
// Remember to import the character file at least once into your project. // [!code focus]
import "./values/characters"; // [!code focus]

export default function App() {
return // ...
}
```

## Premi√®re √©bauche de la narration

<Callout title="Markup" type="info">

Tous les mod√®les prennent en charge <DynamicLink href="/start/markup-markdown">Markdown</DynamicLink> et <DynamicLink href="/start/markup-tailwindcss">Tailwind CSS</DynamicLink>, nous les utiliserons donc pour la narration.

</Callout>

Nous pouvons maintenant commencer √† √©crire la ¬´ premi√®re √©bauche ¬ª de la <DynamicLink href="/start/narration">narration</DynamicLink> du visual novel.
Nous cr√©erons le premier <DynamicLink href="/start/labels">`label`</DynamicLink> appel√© `start`, qui correspondra au d√©but du jeu. Ensuite, nous pourrons √©crire les <DynamicLink href="/start/dialogue">dialogues</DynamicLink> qui se d√©rouleront dans le visual novel.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
james: You're my roommate's replacement, huh?
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!
mc: ...

He thrusts out his hand.

james: James!
mc: ...Peter.

I take his hand and shake.

james: Ooh, Peter! Nice, firm handshake! The last quy always gave me the dead fish. I already think we'r gonna get along fine.
james: Come on in and... 
james: ...
james: I know you're both watching, come on out already!

sly: I just wanted to see what the new guy was like. Hey, you, Peter- be nice to our little brother, or you'll have to deal with *us*.
mc: ...
james: Peter, this is Sly. Yes, that is her real name.

I put out my hand.

sly: I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.
mc: Fair enough, I'm a pretty scary guy, or so l've been told.
james: The redhead behind her is Stephanie.
// Example of using Tailwind CSS
steph: <span class="inline-block motion-translate-y-loop-25">Hey</span>! Everyone calls me Steph. I'll shake your hand.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    () => narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` },
    () => narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => { narration.dialogue = "He thrusts out his hand." },
    () => narration.dialogue = { character: james, text: `James!` },
    () => narration.dialogue = { character: mc, text: `...Peter.` },
    () => { narration.dialogue = "I take his hand and shake." },
    () => narration.dialogue = { character: james, text: `Ooh, Peter! Nice, firm handshake! The last quy always gave me the dead fish. I already think we'r gonna get along fine.` },
    () => narration.dialogue = { character: james, text: `Come on in and...` },
    () => narration.dialogue = { character: james, text: `...` },
    () => narration.dialogue = { character: james, text: `I know you're both watching, come on out already!` },
    () => narration.dialogue = { character: james, text: `I just wanted to see what the new guy was like. Hey, you, Peter- be nice to our little brother, or you'll have to deal with *us*.` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => narration.dialogue = { character: james, text: `Peter, this is Sly. Yes, that is her real name.` },
    () => { narration.dialogue = "I put out my hand." },
    () => narration.dialogue = { character: james, text: `I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.` },
    () => narration.dialogue = { character: mc, text: `Fair enough, I'm a pretty scary guy, or so l've been told.` },
    () => narration.dialogue = { character: james, text: `The redhead behind her is Stephanie.` },
    // Example of using Tailwind CSS
    () => narration.dialogue = { character: steph, text: `<span class="inline-block motion-translate-y-loop-25">Hey</span>! Everyone calls me Steph. I'll shake your hand.` },
    // ...
]);
export default startLabel;
```

### Diviser la narration en `labels`

Il n‚Äôest pas recommand√© de cr√©er des `labels` tr√®s longs, m√™me pour les visual novels lin√©aires. Il est pr√©f√©rable de cr√©er plusieurs petits `labels` et de les appeler lorsque n√©cessaire √† l‚Äôaide des <DynamicLink href="/start/labels-flow">fonctionnalit√©s de contr√¥le du flux narratif</DynamicLink>.

Pour cette raison, m√™me si l‚Äôhistoire est lin√©aire dans ce cas, elle sera divis√©e en plusieurs `labels`, en utilisant `start` et `second_part`.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
james: You're my roommate's replacement, huh?
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!
mc: ...

He thrusts out his hand.

james: James!
mc: ...Peter.

// ...
-> second_part

=== second_part ===

She enters my room before I'VE even had a chance to. \\n\\n...I could've just come back and gotten the platter later...
She sets it on a desk. I throw my two paper bags down beside the empty bed.

steph: They got you a new mattress, right? That last guy was a druggie, did James tell you that?
sly: *We're* the reason he got expelled!
steph: Sly! If word gets out about that... well, actually, it wouldn't matter, *he's* the one who shot himself up.

I'm fumbling for a new subject.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    () => narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` },
    () => narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => { narration.dialogue = "He thrusts out his hand." },
    () => narration.dialogue = { character: james, text: `James!` },
    () => narration.dialogue = { character: mc, text: `...Peter.` },
    // ...
    async (props) => await narration.jump(secondPart, props),
]);
export default startLabel;

const secondPart = newLabel("second_part", [
    () => { narration.dialogue = `She enters my room before I'VE even had a chance to. \n\n...I could've just come back and gotten the platter later...` },
    () => { narration.dialogue = `She sets it on a desk. I throw my two paper bags down beside the empty bed.` },
    () => narration.dialogue = { character: steph, text: `They got you a new mattress, right? That last guy was a druggie, did James tell you that?` },
    () => narration.dialogue = { character: sly, text: `*We're* the reason he got expelled!` },
    () => narration.dialogue = { character: steph, text: `Sly! If word gets out about that... well, actually, it wouldn't matter, *he's* the one who shot himself up.` },
    () => { narration.dialogue = `I'm fumbling for a new subject.` },
    // ...
]);
```

## Menus de choix

Nous allons maintenant demander au joueur s‚Äôil souhaite continuer la suite du visual novel.

Pour cela, nous utiliserons le <DynamicLink href="/start/choices">menu de choix</DynamicLink>.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

You want continue to the next part?
* Yes, I want to continue
-> second_part
* No, I want to stop here
-> END

=== second_part ===

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => {
        narration.dialogue = `You want continue to the next part?`
        narration.choices = [
            newChoiceOption("Yes, I want to continue", secondPart, {}, { type: "jump" }),
            newCloseChoiceOption("No, I want to stop here"),
        ]
    },
]);
export default startLabel;

const secondPart = newLabel("second_part", [
    // ...
]);
```

## Modifier les informations du personnage et les utiliser comme variable

Nous allons maintenant donner au joueur la possibilit√© de modifier le nom de `mc`.

Pour ce faire, nous demanderons au joueur de <DynamicLink href="/start/input">remplir un champ de saisie √† l‚Äôaide des fonctionnalit√©s de Pixi‚ÄôVN</DynamicLink>.

Apr√®s avoir r√©cup√©r√© la valeur saisie, il sera possible de <DynamicLink href="/start/character#edit">d√©finir le nom du personnage</DynamicLink> √† l‚Äôaide de cette valeur.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

He thrusts out his hand.
# request input type string default Peter
What is your name?
# rename mc { _input_value_ }

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    () => { narration.dialogue = `He thrusts out his hand.` },
    () => {
        narration.requestInput({ type: "string" }, "Peter")
        narration.dialogue = `What is your name?`
    },
    () => {
        mc.name = narration.inputValue as string
    },
    // ...
]);
export default startLabel;
```

Il sera ensuite possible d‚Äô<DynamicLink href="/start/character#use">utiliser les noms des personnages dans les dialogues</DynamicLink>.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
VAR steph_fullname = "Stephanie"

=== start ===
// ...

sly: I just wanted to see what the new guy was like. Hey, you, [mc]- be nice to our little brother, or you'll have to deal with *us*.
mc: ...
james: [mc], this is [sly]. Yes, that is her real name.

I put out my hand.

sly: I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.
mc: Fair enough, I'm a pretty scary guy, or so l've been told.
james: The redhead behind her is [steph_fullname].
steph: Hey! Everyone calls me [steph]. I'll shake your hand.

She puts out her hand, and I take it.

mc: Thanks, good to meet you, [steph_fullname].
steph: WOW, that is, like, the most perfect handshake I've ever had! Firm, but also gentle. [sly], you *gotta* shake his hand!

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const steph_fullname = "Stephanie";

const startLabel = newLabel("start", [
    // ...
    () => narration.dialogue = { character: sly, text: `I just wanted to see what the new guy was like. Hey, you, ${mc.name}- be nice to our little brother, or you'll have to deal with *us*.` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => narration.dialogue = { character: james, text: `${mc.name}, this is ${sly.name}. Yes, that is her real name.` },
    () => { narration.dialogue = `I put out my hand.` },
    () => narration.dialogue = { character: sly, text: `I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.` },
    () => narration.dialogue = { character: mc, text: `Fair enough, I'm a pretty scary guy, or so I've been told.` },
    () => narration.dialogue = { character: james, text: `The redhead behind her is ${steph_fullname}.` },
    () => narration.dialogue = { character: steph, text: `Hey! Everyone calls me ${steph.name}. I'll shake your hand.` },
    () => { narration.dialogue = `She puts out her hand, and I take it.` },
    () => narration.dialogue = { character: mc, text: `Thanks, good to meet you, ${steph_fullname}.` },
    () => narration.dialogue = { character: steph, text: `WOW, that is, like, the most perfect handshake I've ever had! Firm, but also gentle. ${sly.name}, you *gotta* shake his hand!` },
    // ...
]);
export default startLabel;
```

## Utiliser la fonctionnalit√© ¬´ glue ¬ª des dialogues

Dans les visual novels, il est souvent utile de coller du texte dans le dialogue en cours. Par exemple, pour mettre une conversation en pause et la reprendre dans un `step` suivant. Pour ce faire, nous pouvons utiliser la <DynamicLink href="/start/dialogue#dialogue-glue">fonctionnalit√© glue</DynamicLink>.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

james: Ooh, [mc]! Nice, firm handshake!
<>The last guy always gave me the dead fish.
<>I already think we're gonna get along fine.
james: Come on in and...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => narration.dialogue = { character: james, text: `Ooh, ${mc.name}! Nice, firm handshake!` },
    async () => {
        narration.dialogGlue = true
        narration.dialogue = `The last guy always gave me the dead fish.`
    },
    async () => {
        narration.dialogGlue = true
        narration.dialogue = `I already think we're gonna get along fine.`
    },
    async () => narration.dialogue = { character: james, text: `Come on in and...` },
    // ...
]);
export default startLabel;
```

## D√©finir et charger les assets

<Callout type="info">

Pour charger et manipuler des assets (images, Gif, vid√©os, etc.), vous devez utiliser `Assets`. `Assets` est une classe riche en fonctionnalit√©s provenant de la biblioth√®que PixiJS. Pour plus d‚Äôinformations, consultez [ici](https://pixijs.com/8.x/guides/components/assets).

</Callout>

L‚Äôune des premi√®res √©tapes consiste √† choisir o√π enregistrer les assets de votre visual novel. Dans cet exemple, nous enregistrerons les assets dans Firebase Storage (un service d‚Äôh√©bergement). Vous pouvez utiliser le service d‚Äôh√©bergement de votre choix ou m√™me enregistrer les assets localement dans le projet. Pour en savoir plus, consultez <DynamicLink href="/start/assets">ici</DynamicLink>.

Avant d‚Äôutiliser un asset, il est fortement recommand√© <DynamicLink href="/start/assets-management#initialize-the-asset-matrix-at-project-start">d‚Äôinitialiser la matrice d‚Äôassets</DynamicLink>.

Par d√©faut, comme vous pouvez le voir dans le fichier `assets/manifest.ts`, tous les templates dans `onLoadingLabel` essaient de charger en arri√®re-plan les ¬´ bundle assets ¬ª avec un alias √©gal √† l‚Äôidentifiant du `label` courant. Il est donc recommand√© d‚Äôajouter, dans le `manifest`, un ¬´ bundle assets ¬ª pour chaque `label` avec un alias √©gal √† l‚Äôidentifiant du `label` et contenant les images utilis√©es dans ce `label`.

Voici un exemple:

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";
import { MAIN_MENU_ROUTE } from "../constans";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        // screens
        {
            name: MAIN_MENU_ROUTE,
            assets: [
                {
                    alias: "background_main_menu",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/main-menu.png",
                },
            ],
        },
        // labels
        {
            name: "start",
            assets: [
                {
                    alias: "bg01-hallway",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/bg01-hallway.webp",
                },
            ],
        },
        {
            name: "second_part",
            assets: [
                {
                    alias: "bg02-dorm",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/bg02-dorm.webp",
                },
            ],
        },
        // characters
        {
            name: "fm01",
            assets: [
                {
                    alias: "fm01-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-body.webp",
                },
                {
                    alias: "fm01-eyes-grin",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-grin.webp",
                },
                {
                    alias: "fm01-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-smile.webp",
                },
                {
                    alias: "fm01-eyes-soft",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-soft.webp",
                },
                {
                    alias: "fm01-eyes-upset",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-upset.webp",
                },
                {
                    alias: "fm01-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-wow.webp",
                },
                {
                    alias: "fm01-mouth-grin00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-grin00.webp",
                },
                {
                    alias: "fm01-mouth-serious00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-serious00.webp",
                },
                {
                    alias: "fm01-mouth-serious01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-serious01.webp",
                },
                {
                    alias: "fm01-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-smile00.webp",
                },
                {
                    alias: "fm01-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-smile01.webp",
                },
                {
                    alias: "fm01-mouth-soft00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-soft00.webp",
                },
                {
                    alias: "fm01-mouth-soft01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-soft01.webp",
                },
                {
                    alias: "fm01-mouth-upset00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-upset00.webp",
                },
                {
                    alias: "fm01-mouth-upset01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-upset01.webp",
                },
                {
                    alias: "fm01-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-wow01.webp",
                },
            ],
        },
        {
            name: "fm02",
            assets: [
                {
                    alias: "fm02-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-body.webp",
                },
                {
                    alias: "fm02-eyes-bawl",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-bawl.webp",
                },
                {
                    alias: "fm02-eyes-joy",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-joy.webp",
                },
                {
                    alias: "fm02-eyes-nervous",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-nervous.webp",
                },
                {
                    alias: "fm02-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-smile.webp",
                },
                {
                    alias: "fm02-eyes-upset",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-upset.webp",
                },
                {
                    alias: "fm02-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-wow.webp",
                },
                {
                    alias: "fm02-mouth-cry01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-cry01.webp",
                },
                {
                    alias: "fm02-mouth-nervous00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-nervous00.webp",
                },
                {
                    alias: "fm02-mouth-nervous01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-nervous01.webp",
                },
                {
                    alias: "fm02-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-smile00.webp",
                },
                {
                    alias: "fm02-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-smile01.webp",
                },
                {
                    alias: "fm02-mouth-upset00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-upset00.webp",
                },
                {
                    alias: "fm02-mouth-upset01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-upset01.webp",
                },
                {
                    alias: "fm02-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-wow01.webp",
                },
            ],
        },
        {
            name: "m01",
            assets: [
                {
                    alias: "m01-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-body.webp",
                },
                {
                    alias: "m01-eyes-annoy",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-annoy.webp",
                },
                {
                    alias: "m01-eyes-concern",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-concern.webp",
                },
                {
                    alias: "m01-eyes-cry",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-cry.webp",
                },
                {
                    alias: "m01-eyes-grin",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-grin.webp",
                },
                {
                    alias: "m01-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-smile.webp",
                },
                {
                    alias: "m01-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-wow.webp",
                },
                {
                    alias: "m01-mouth-annoy00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-annoy00.webp",
                },
                {
                    alias: "m01-mouth-annoy01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-annoy01.webp",
                },
                {
                    alias: "m01-mouth-concern00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-concern00.webp",
                },
                {
                    alias: "m01-mouth-concern01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-concern01.webp",
                },
                {
                    alias: "m01-mouth-cry00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-cry00.webp",
                },
                {
                    alias: "m01-mouth-cry01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-cry01.webp",
                },
                {
                    alias: "m01-mouth-grin00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-grin00.webp",
                },
                {
                    alias: "m01-mouth-neutral00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-neutral00.webp",
                },
                {
                    alias: "m01-mouth-neutral01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-neutral01.webp",
                },
                {
                    alias: "m01-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-smile00.webp",
                },
                {
                    alias: "m01-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-smile01.webp",
                },
                {
                    alias: "m01-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-wow01.webp",
                },
            ],
        },
    ],
};
export default manifest;
```

```ts tab="utils/defineAssets.ts"
import { Assets } from "@drincs/pixi-vn";
import manifest from "../assets/manifest";

/**
 * Define all the assets that will be used in the game.
 * This function will be called before the game starts.
 * You can read more about assets management in the documentation: https://pixi-vn.web.app/start/assets-management.html
 */
export async function defineAssets() {
    await Assets.init({ manifest });

    // The game will not start until these asserts are loaded.
    await Assets.loadBundle("main_menu");

    // The game will start immediately, but these asserts will be loaded in the background.
    // Assets.backgroundLoadBundle("main_menu");
    // Assets.backgroundLoad("background_main_menu");
}
```

```ts tab="src/main.ts"
import { Assets, canvas, Container, Game } from "@drincs/pixi-vn";
import { createRoot } from "react-dom/client";
import App from "./App";
import { CANVAS_UI_LAYER_NAME } from "./constans";
import "./index.css";
import "./values/characters";

// ...

Game.onLoadingLabel((_stepId, { id }) => { // [!code focus]
    Assets.backgroundLoadBundle(id); // [!code focus]
}); // [!code focus]
```

## Ajouter des images de fond et de personnages

Il est maintenant temps de penser √©galement √† la partie visuelle. Nous allons ajouter les arri√®re-plans et les sprites des personnages sur le canvas du visual novel.

**Qu‚Äôest-ce qu‚Äôun sprite ?** En infographie, un sprite est une image bitmap bidimensionnelle int√©gr√©e dans une sc√®ne plus large, le plus souvent dans un jeu vid√©o 2D.

Dans notre cas, les sprites des personnages sont compos√©s de 3 images : le corps, les yeux et la bouche. Nous utilisons ensuite <DynamicLink href="/start/canvas-image-container">ImageContainer</DynamicLink> pour composer le personnage. Vous trouverez plus d‚Äôinformations sur l‚Äôajout de composants canvas dans <DynamicLink href="/start/canvas-components">cette documentation</DynamicLink>.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    async () => {
        await showImage("bg", "bg01-hallway");
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-neutral01"], { xAlign: 0.5, yAlign: 1 });
        narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` }
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-smile01"])
        narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!` }
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-grin00"])
        narration.dialogue = { character: mc, text: `...` }
    },
    // ...
]);
export default startLabel;
```

## Chargement intelligent des assets

Dans notre cas, nous avons enregistr√© les images du jeu sur un service d‚Äôh√©bergement (Firebase). Pour cette raison, le chargement des assets n‚Äôest pas instantan√©.

Afin que le joueur ne per√ßoive pas trop de chargements, nous devons les regrouper dans certaines phases du jeu. Dans cet exemple, je chargerai les images les plus utilis√©es au d√©but du `label`.

Vous pouvez trouver plus d‚Äôinformations sur la gestion des chargements <DynamicLink href="/start/assets-management">ici</DynamicLink>.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
# lazyload bundle m01 fm01 fm02 // [!code focus]

# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1 with movein direction right speed 300
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
], {
    onLoadingLabel: () => { // [!code focus]
        Assets.backgroundLoadBundle(["fm01", "fm02", "m01"]); // [!code focus]
    } // [!code focus]
});
export default startLabel;
```

## Utiliser des transitions

Pour rendre le visual novel plus dynamique, vous pouvez utiliser des transitions pour afficher les images. Vous trouverez plus d‚Äôinformations sur l‚Äôutilisation des transitions <DynamicLink href="/start/canvas-transition">ici</DynamicLink>.

Voici un exemple:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1 with movein direction right speed 300
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    async () => {
        await showImage("bg", "bg01-hallway");
        await moveIn(
            "james",
            {
                value: ["m01-body", "m01-eyes-smile", "m01-mouth-neutral01"],
                options: { xAlign: 0.5, yAlign: 1 },
            },
            { direction: "right", ease: "circInOut", type: "spring" }
        );
        narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` };
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-smile01"]);
        narration.dialogue = {
            character: james,
            text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!`,
        };
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-grin00"]);
        narration.dialogue = { character: mc, text: `...` };
    },
    // ...
]);
export default startLabel;
```

## Construire une animation

Pour rendre le visual novel plus dynamique, vous pouvez utiliser des animations. Pour plus d‚Äôinformations sur l‚Äôutilisation des animations, consultez <DynamicLink href="/start/canvas-animations-effects">ici</DynamicLink>.

Je recommande d‚Äôutiliser TypeScript si vous devez d√©finir de nombreuses propri√©t√©s, car cela offre plus de contr√¥le, plus de fonctionnalit√©s et un retour de type.

Dans cet exemple, mon animation retirera `steph` de la sc√®ne et la r√©ins√©rera au `step` suivant. Je la retournerai √©galement sur l‚Äôaxe X pour m‚Äôassurer qu‚Äôelle regarde dans la bonne direction.

Pour faire sortir/entrer `steph`, j‚Äôutiliserai les fonctions `moveOut` et `moveIn`. Pour l‚Äôeffet miroir, j‚Äôutiliserai la fonction `canvas.animate`.

Tout d‚Äôabord, j‚Äôutilise la fonction `canvas.animate` pour cr√©er une animation qui d√©finit la propri√©t√© `scaleX` de `-1` (miroir) √† `1`, avec `autoplay: false` afin qu‚Äôelle ne d√©marre pas imm√©diatement.

Ensuite, j‚Äôutilise la fonction `moveIn` pour d√©placer `steph` dans la sc√®ne, en passant le `tickerId` de l‚Äôanimation afin qu‚Äôelle puisse reprendre apr√®s la fin de la transition.

J‚Äôutilise l‚Äôoption `completeOnContinue: true` pour m‚Äôassurer que l‚Äôanimation se termine avant l‚Äôex√©cution du `step` suivant. Pour `moveIn`, √©tant une transition, `completeOnContinue` est d√©fini sur true par d√©faut.

Comme j‚Äôutilise TypeScript pour cette animation, j‚Äôai cr√©√© un `label` d√©di√© afin qu‚Äôil puisse √™tre appel√© depuis d‚Äôautres langages √©galement.

```ts title="labels/animation01.ts"
import { canvas, ImageContainer, moveIn, newLabel } from "@drincs/pixi-vn";

export const animation01 = newLabel("animation_01", [
    async () => {
        let tickerId = canvas.animate<ImageContainer>(
            "steph",
            {
                scaleX: 1,
            },
            { autoplay: false, completeOnContinue: true }
        );

        await moveIn(
            "steph",
            {
                value: ["fm02-body", "fm02-eyes-joy", "fm02-mouth-smile01"],
                options: { xAlign: 0.8, yAlign: 1, scale: { y: 1, x: -1 }, anchor: 0.5 },
            },
            { direction: "right", ease: "easeInOut", tickerIdToResume: tickerId }
        );
    },
]);
```

<Callout type="info" title="ink">

Comme expliqu√© <DynamicLink href="/ink/labels#use-the-call-script">ici</DynamicLink>, depuis _ink_ vous pouvez appeler des `labels` √©crits en JS/TS et inversement.

</Callout>

Vous pouvez maintenant appeler ce `label` (`animation_01`) depuis le `label` principal (`start`).

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-grin00]
# show imagecontainer sly [fm01-body fm01-eyes-smile fm01-mouth-smile00]
# show imagecontainer steph [fm02-body fm02-eyes-upset fm02-mouth-nervous00]
# remove image steph with moveout direction left speed 300
[steph_fullname] goes through the opposite door,
# call animation_01
<> and returns with a HUGE tinfoil-covered platter.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-grin00"]);
        await showImageContainer("sly", ["fm01-body", "fm01-eyes-smile", "fm01-mouth-smile00"]);
        await showImageContainer("steph", ["fm02-body", "fm02-eyes-upset", "fm02-mouth-nervous00"]);
        moveOut("steph", { direction: "left", speed: 300 });
        narration.dialogue = `${steph_fullname} goes through the opposite door,`;
    },
    async (props) => {
        narration.dialogGlue = true;
        narration.dialogue = ` and returns with a HUGE tinfoil-covered platter.`;
        await narration.call(animation01, props);
    },
    // ...
]);
export default startLabel;
```

<Comments>

## Add music and sound effects

This page is under construction.

:::tabs

== ink example

```ink title="ink"

```

== Typescript example

```ts

```

::: -->

</Comments>

## Conclusion

Vous savez maintenant comment cr√©er un visual novel avec Pixi‚ÄôVN. Un grand pouvoir implique de grandes responsabilit√©s : utilisez-le judicieusement et cr√©ez une excellente histoire ! üöÄ

Voici un exemple interactif avec une interface minimale (HTML). En faisant d√©filer vers le bas, vous pouvez voir le m√™me r√©sultat en utilisant une interface compl√®te (template React).

<Tabs items={["ink", "Typescript"]} groupId="narrative_language">
<Tab>
<InkVisualNovelExample />
</Tab>
<Tab>
<TSVisualNovelExample />
</Tab>
</Tabs>

<iframe src="https://pixi-vn-react-template.web.app/"
    title="Visual Novel - React"
    style={{
        width: "100%",
        height: "400px",
        border: "0",
        borderRadius: "4px",
        overflow: "hidden",
    }}
    allowFullScreen={true}
></iframe>
