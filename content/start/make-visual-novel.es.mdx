---
title: Crea tu primer visual novel
description: Gu√≠a paso a paso para crear un visual novel con Pixi‚ÄôVN, que cubre la configuraci√≥n del proyecto, la narrativa, los recursos y la interactividad.
---

import { TSVisualNovelExample } from "@/components/vn-examples";
import { InkVisualNovelExample } from "@/components/vn-ink-examples";

Este tutorial te guiar√° a trav√©s del proceso de creaci√≥n de tu primer visual novel.

**¬øQu√© es un visual novel?** Un visual novel (VN) es una forma de ficci√≥n interactiva digital. Los visual novels suelen asociarse con el medio de los videojuegos, pero no siempre se clasifican como tales. Combinan una narrativa textual con ilustraciones est√°ticas o animadas y un grado variable de interactividad. Este formato tambi√©n recibe en ocasiones el nombre de ¬´novel game¬ª, una retranscripci√≥n del t√©rmino wasei-eigo _noberu gƒìmu_Ôºà„Éé„Éô„É´„Ç≤„Éº„É†Ôºâ, que se utiliza con mayor frecuencia en Jap√≥n.

Con fines de prueba, en esta gu√≠a recrearemos el visual novel [Breakdown](https://joshpowlison.itch.io/breakdown) utilizando Pixi‚ÄôVN. Breakdown es una historia corta que contiene todas las caracter√≠sticas que deber√≠a tener un visual novel. Josh Powlison, el creador de Breakdown, nos ha dado permiso para usar su narraci√≥n con fines educativos ‚ù§Ô∏è.

Dado que Pixi‚ÄôVN te permite escribir tu propia narrativa eligiendo uno o varios <DynamicLink href="/start/narration">lenguajes narrativos disponibles</DynamicLink>, se proporcionar√°n ejemplos para cada lenguaje disponible actualmente en cada etapa del desarrollo.

## Crear un nuevo proyecto

El primer paso consiste en crear un nuevo proyecto. Puedes encontrar m√°s informaci√≥n sobre c√≥mo crear un proyecto a partir de una plantilla <DynamicLink href="/start#project-initialization">aqu√≠</DynamicLink>. En esta gu√≠a utilizaremos la plantilla ¬´Visual Novel - React¬ª.

`Visual Novel -> React`

Una vez completada la creaci√≥n, es muy importante leer el archivo `README.md` que se encuentra en la ra√≠z del proyecto. Este archivo contiene informaci√≥n importante sobre el proyecto y sobre c√≥mo utilizarlo.

En nuestro caso, para iniciar el proyecto solo ser√° necesario ejecutar los comandos indicados:

```bash
npm install
npm start
```

## Creaci√≥n de personajes

Ahora definiremos los personajes de esta historia. Para ello, los personajes que se utilizar√°n se definir√°n en el archivo `/values/characters.ts`. Para obtener m√°s informaci√≥n sobre c√≥mo crear y utilizar personajes, puedes consultar: <DynamicLink href="/start/character">Characters</DynamicLink>

¬øQu√© significa `mc`? `mc` es una abreviatura com√∫n de ¬´Main Character¬ª. En los visual novels es una pr√°ctica habitual usar `mc` como nombre del personaje principal.

```ts tab="values/characters.ts"
import { RegisteredCharacters } from "@drincs/pixi-vn";
import Character from "../models/Character";

export const mc = new Character('mc', {
    name: 'Me',
});

export const james = new Character('james', {
    name: 'James',
    color: "#0084ac"
});

export const steph = new Character('steph', {
    name: 'Steph',
    color: "#ac5900"
});

export const sly = new Character('sly', {
    name: 'Sly',
    color: "#6d00ac"
});

RegisteredCharacters.add([mc, james, steph, sly]);
```

```ts tab="App.tsx"
// Remember to import the character file at least once into your project. // [!code focus]
import "./values/characters"; // [!code focus]

export default function App() {
return // ...
}
```

## Primer borrador de la narrativa

<Callout title="Markup" type="info">

Todas las plantillas admiten <DynamicLink href="/start/markup-markdown">Markdown</DynamicLink> y <DynamicLink href="/start/markup-tailwindcss">Tailwind CSS</DynamicLink>, por lo que los utilizaremos para la narrativa.

</Callout>

Ahora podemos comenzar a escribir el ¬´primer borrador¬ª de la <DynamicLink href="/start/narration">narrativa</DynamicLink> del visual novel.
Crearemos el primer <DynamicLink href="/start/labels">`label`</DynamicLink> llamado `start`, que ser√° el inicio del juego. Despu√©s de eso, podremos escribir los <DynamicLink href="/start/dialogue">dialogues</DynamicLink> que se desarrollar√°n en el visual novel.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
james: You're my roommate's replacement, huh?
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!
mc: ...

He thrusts out his hand.

james: James!
mc: ...Peter.

I take his hand and shake.

james: Ooh, Peter! Nice, firm handshake! The last quy always gave me the dead fish. I already think we'r gonna get along fine.
james: Come on in and... 
james: ...
james: I know you're both watching, come on out already!

sly: I just wanted to see what the new guy was like. Hey, you, Peter- be nice to our little brother, or you'll have to deal with *us*.
mc: ...
james: Peter, this is Sly. Yes, that is her real name.

I put out my hand.

sly: I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.
mc: Fair enough, I'm a pretty scary guy, or so l've been told.
james: The redhead behind her is Stephanie.
// Example of using Tailwind CSS
steph: <span class="inline-block motion-translate-y-loop-25">Hey</span>! Everyone calls me Steph. I'll shake your hand.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    () => narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` },
    () => narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => { narration.dialogue = "He thrusts out his hand." },
    () => narration.dialogue = { character: james, text: `James!` },
    () => narration.dialogue = { character: mc, text: `...Peter.` },
    () => { narration.dialogue = "I take his hand and shake." },
    () => narration.dialogue = { character: james, text: `Ooh, Peter! Nice, firm handshake! The last quy always gave me the dead fish. I already think we'r gonna get along fine.` },
    () => narration.dialogue = { character: james, text: `Come on in and...` },
    () => narration.dialogue = { character: james, text: `...` },
    () => narration.dialogue = { character: james, text: `I know you're both watching, come on out already!` },
    () => narration.dialogue = { character: james, text: `I just wanted to see what the new guy was like. Hey, you, Peter- be nice to our little brother, or you'll have to deal with *us*.` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => narration.dialogue = { character: james, text: `Peter, this is Sly. Yes, that is her real name.` },
    () => { narration.dialogue = "I put out my hand." },
    () => narration.dialogue = { character: james, text: `I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.` },
    () => narration.dialogue = { character: mc, text: `Fair enough, I'm a pretty scary guy, or so l've been told.` },
    () => narration.dialogue = { character: james, text: `The redhead behind her is Stephanie.` },
    // Example of using Tailwind CSS
    () => narration.dialogue = { character: steph, text: `<span class="inline-block motion-translate-y-loop-25">Hey</span>! Everyone calls me Steph. I'll shake your hand.` },
    // ...
]);
export default startLabel;
```

### Dividir la narrativa en `labels`

No es recomendable crear `labels` muy largos, incluso en visual novels lineales. En su lugar, es aconsejable crear varios `labels` peque√±os y llamarlos cuando sea necesario mediante las <DynamicLink href="/start/labels-flow">funcionalidades de control del flujo narrativo</DynamicLink>.

Por esta raz√≥n, aunque en este caso la historia sea lineal, se dividir√° en varios `labels`, utilizando `start` y `second_part`.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
james: You're my roommate's replacement, huh?
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!
mc: ...

He thrusts out his hand.

james: James!
mc: ...Peter.

// ...
-> second_part

=== second_part ===

She enters my room before I'VE even had a chance to. \\n\\n...I could've just come back and gotten the platter later...
She sets it on a desk. I throw my two paper bags down beside the empty bed.

steph: They got you a new mattress, right? That last guy was a druggie, did James tell you that?
sly: *We're* the reason he got expelled!
steph: Sly! If word gets out about that... well, actually, it wouldn't matter, *he's* the one who shot himself up.

I'm fumbling for a new subject.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    () => narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` },
    () => narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you' fine!` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => { narration.dialogue = "He thrusts out his hand." },
    () => narration.dialogue = { character: james, text: `James!` },
    () => narration.dialogue = { character: mc, text: `...Peter.` },
    // ...
    async (props) => await narration.jump(secondPart, props),
]);
export default startLabel;

const secondPart = newLabel("second_part", [
    () => { narration.dialogue = `She enters my room before I'VE even had a chance to. \n\n...I could've just come back and gotten the platter later...` },
    () => { narration.dialogue = `She sets it on a desk. I throw my two paper bags down beside the empty bed.` },
    () => narration.dialogue = { character: steph, text: `They got you a new mattress, right? That last guy was a druggie, did James tell you that?` },
    () => narration.dialogue = { character: sly, text: `*We're* the reason he got expelled!` },
    () => narration.dialogue = { character: steph, text: `Sly! If word gets out about that... well, actually, it wouldn't matter, *he's* the one who shot himself up.` },
    () => { narration.dialogue = `I'm fumbling for a new subject.` },
    // ...
]);
```

## Men√∫s de elecci√≥n

Ahora preguntaremos al jugador si desea continuar con la parte siguiente del visual novel.

Para ello, utilizaremos el <DynamicLink href="/start/choices">men√∫ de elecciones</DynamicLink>.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

You want continue to the next part?
* Yes, I want to continue
-> second_part
* No, I want to stop here
-> END

=== second_part ===

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => {
        narration.dialogue = `You want continue to the next part?`
        narration.choices = [
            newChoiceOption("Yes, I want to continue", secondPart, {}, { type: "jump" }),
            newCloseChoiceOption("No, I want to stop here"),
        ]
    },
]);
export default startLabel;

const secondPart = newLabel("second_part", [
    // ...
]);
```

## Editar la informaci√≥n del personaje y usarla como variable

Ahora daremos al jugador la posibilidad de cambiar el nombre de `mc`.

Para ello, pediremos al jugador que <DynamicLink href="/start/input">complete un campo de entrada utilizando las funcionalidades de Pixi‚ÄôVN</DynamicLink>.

Despu√©s de obtener el valor introducido, ser√° posible <DynamicLink href="/start/character#edit">establecer el nombre del personaje</DynamicLink> utilizando dicho valor.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

He thrusts out his hand.
# request input type string default Peter
What is your name?
# rename mc { _input_value_ }

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    () => { narration.dialogue = `He thrusts out his hand.` },
    () => {
        narration.requestInput({ type: "string" }, "Peter")
        narration.dialogue = `What is your name?`
    },
    () => {
        mc.name = narration.inputValue as string
    },
    // ...
]);
export default startLabel;
```

A continuaci√≥n, ser√° posible <DynamicLink href="/start/character#use">usar los nombres de los personajes dentro de los di√°logos</DynamicLink>.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
VAR steph_fullname = "Stephanie"

=== start ===
// ...

sly: I just wanted to see what the new guy was like. Hey, you, [mc]- be nice to our little brother, or you'll have to deal with *us*.
mc: ...
james: [mc], this is [sly]. Yes, that is her real name.

I put out my hand.

sly: I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.
mc: Fair enough, I'm a pretty scary guy, or so l've been told.
james: The redhead behind her is [steph_fullname].
steph: Hey! Everyone calls me [steph]. I'll shake your hand.

She puts out her hand, and I take it.

mc: Thanks, good to meet you, [steph_fullname].
steph: WOW, that is, like, the most perfect handshake I've ever had! Firm, but also gentle. [sly], you *gotta* shake his hand!

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const steph_fullname = "Stephanie";

const startLabel = newLabel("start", [
    // ...
    () => narration.dialogue = { character: sly, text: `I just wanted to see what the new guy was like. Hey, you, ${mc.name}- be nice to our little brother, or you'll have to deal with *us*.` },
    () => narration.dialogue = { character: mc, text: `...` },
    () => narration.dialogue = { character: james, text: `${mc.name}, this is ${sly.name}. Yes, that is her real name.` },
    () => { narration.dialogue = `I put out my hand.` },
    () => narration.dialogue = { character: sly, text: `I'm not shakin' your hand until I decide you're an all-right dude. Sorry, policy.` },
    () => narration.dialogue = { character: mc, text: `Fair enough, I'm a pretty scary guy, or so I've been told.` },
    () => narration.dialogue = { character: james, text: `The redhead behind her is ${steph_fullname}.` },
    () => narration.dialogue = { character: steph, text: `Hey! Everyone calls me ${steph.name}. I'll shake your hand.` },
    () => { narration.dialogue = `She puts out her hand, and I take it.` },
    () => narration.dialogue = { character: mc, text: `Thanks, good to meet you, ${steph_fullname}.` },
    () => narration.dialogue = { character: steph, text: `WOW, that is, like, the most perfect handshake I've ever had! Firm, but also gentle. ${sly.name}, you *gotta* shake his hand!` },
    // ...
]);
export default startLabel;
```

## Usar la funcionalidad ‚Äúglue‚Äù de dialogues

En las novelas visuales, a menudo es √∫til pegar texto en el dialogue actual. Por ejemplo, para pausar una conversaci√≥n y continuarla en un `step` posterior. Para hacerlo, podemos usar la <DynamicLink href="/start/dialogue#dialogue-glue">funcionalidad glue</DynamicLink>.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

james: Ooh, [mc]! Nice, firm handshake!
<>The last guy always gave me the dead fish.
<>I already think we're gonna get along fine.
james: Come on in and...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => narration.dialogue = { character: james, text: `Ooh, ${mc.name}! Nice, firm handshake!` },
    async () => {
        narration.dialogGlue = true
        narration.dialogue = `The last guy always gave me the dead fish.`
    },
    async () => {
        narration.dialogGlue = true
        narration.dialogue = `I already think we're gonna get along fine.`
    },
    async () => narration.dialogue = { character: james, text: `Come on in and...` },
    // ...
]);
export default startLabel;
```

## Definir y cargar los assets

<Callout type="info">

Para cargar y manipular assets (im√°genes, Gif, v√≠deos, etc...) es necesario usar `Assets`. `Assets` es una clase con muchas funcionalidades y proviene de la biblioteca PixiJS. Si deseas m√°s informaci√≥n, lee [aqu√≠](https://pixijs.com/8.x/guides/components/assets).

</Callout>

Uno de los primeros pasos es elegir d√≥nde guardar los assets de tu novela visual. En este caso, guardaremos los assets en Firebase Storage (un servicio de hosting). Puedes usar cualquier servicio de hosting que prefieras o incluso guardar los assets localmente en el proyecto. Lee m√°s sobre esto <DynamicLink href="/start/assets">aqu√≠</DynamicLink>.

Antes de usar un asset, se recomienda encarecidamente <DynamicLink href="/start/assets-management#initialize-the-asset-matrix-at-project-start">inicializar la matriz de assets</DynamicLink>.

De forma predeterminada, como puedes ver en el archivo `assets/manifest.ts`, todas las plantillas en `onLoadingLabel` intentan cargar en segundo plano los ‚Äúbundle assets‚Äù con un alias igual al id del `label` actual. Por lo tanto, se recomienda a√±adir en el `manifest` un ‚Äúbundle assets‚Äù para cada `label`, con un alias igual al id del `label` y que contenga las im√°genes utilizadas en ese `label`.

Este es un ejemplo:

```ts tab="assets/manifest.ts"
import { AssetsManifest } from "@drincs/pixi-vn";
import { MAIN_MENU_ROUTE } from "../constans";

/**
 * Manifest for the assets used in the game.
 * You can read more about the manifest here: https://pixijs.com/8.x/guides/components/assets#loading-multiple-assets
 */
const manifest: AssetsManifest = {
    bundles: [
        // screens
        {
            name: MAIN_MENU_ROUTE,
            assets: [
                {
                    alias: "background_main_menu",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/main-menu.png",
                },
            ],
        },
        // labels
        {
            name: "start",
            assets: [
                {
                    alias: "bg01-hallway",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/bg01-hallway.webp",
                },
            ],
        },
        {
            name: "second_part",
            assets: [
                {
                    alias: "bg02-dorm",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/bg02-dorm.webp",
                },
            ],
        },
        // characters
        {
            name: "fm01",
            assets: [
                {
                    alias: "fm01-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-body.webp",
                },
                {
                    alias: "fm01-eyes-grin",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-grin.webp",
                },
                {
                    alias: "fm01-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-smile.webp",
                },
                {
                    alias: "fm01-eyes-soft",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-soft.webp",
                },
                {
                    alias: "fm01-eyes-upset",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-upset.webp",
                },
                {
                    alias: "fm01-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-eyes-wow.webp",
                },
                {
                    alias: "fm01-mouth-grin00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-grin00.webp",
                },
                {
                    alias: "fm01-mouth-serious00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-serious00.webp",
                },
                {
                    alias: "fm01-mouth-serious01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-serious01.webp",
                },
                {
                    alias: "fm01-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-smile00.webp",
                },
                {
                    alias: "fm01-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-smile01.webp",
                },
                {
                    alias: "fm01-mouth-soft00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-soft00.webp",
                },
                {
                    alias: "fm01-mouth-soft01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-soft01.webp",
                },
                {
                    alias: "fm01-mouth-upset00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-upset00.webp",
                },
                {
                    alias: "fm01-mouth-upset01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-upset01.webp",
                },
                {
                    alias: "fm01-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm01/fm01-mouth-wow01.webp",
                },
            ],
        },
        {
            name: "fm02",
            assets: [
                {
                    alias: "fm02-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-body.webp",
                },
                {
                    alias: "fm02-eyes-bawl",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-bawl.webp",
                },
                {
                    alias: "fm02-eyes-joy",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-joy.webp",
                },
                {
                    alias: "fm02-eyes-nervous",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-nervous.webp",
                },
                {
                    alias: "fm02-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-smile.webp",
                },
                {
                    alias: "fm02-eyes-upset",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-upset.webp",
                },
                {
                    alias: "fm02-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-eyes-wow.webp",
                },
                {
                    alias: "fm02-mouth-cry01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-cry01.webp",
                },
                {
                    alias: "fm02-mouth-nervous00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-nervous00.webp",
                },
                {
                    alias: "fm02-mouth-nervous01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-nervous01.webp",
                },
                {
                    alias: "fm02-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-smile00.webp",
                },
                {
                    alias: "fm02-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-smile01.webp",
                },
                {
                    alias: "fm02-mouth-upset00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-upset00.webp",
                },
                {
                    alias: "fm02-mouth-upset01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-upset01.webp",
                },
                {
                    alias: "fm02-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/fm02/fm02-mouth-wow01.webp",
                },
            ],
        },
        {
            name: "m01",
            assets: [
                {
                    alias: "m01-body",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-body.webp",
                },
                {
                    alias: "m01-eyes-annoy",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-annoy.webp",
                },
                {
                    alias: "m01-eyes-concern",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-concern.webp",
                },
                {
                    alias: "m01-eyes-cry",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-cry.webp",
                },
                {
                    alias: "m01-eyes-grin",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-grin.webp",
                },
                {
                    alias: "m01-eyes-smile",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-smile.webp",
                },
                {
                    alias: "m01-eyes-wow",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-eyes-wow.webp",
                },
                {
                    alias: "m01-mouth-annoy00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-annoy00.webp",
                },
                {
                    alias: "m01-mouth-annoy01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-annoy01.webp",
                },
                {
                    alias: "m01-mouth-concern00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-concern00.webp",
                },
                {
                    alias: "m01-mouth-concern01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-concern01.webp",
                },
                {
                    alias: "m01-mouth-cry00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-cry00.webp",
                },
                {
                    alias: "m01-mouth-cry01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-cry01.webp",
                },
                {
                    alias: "m01-mouth-grin00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-grin00.webp",
                },
                {
                    alias: "m01-mouth-neutral00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-neutral00.webp",
                },
                {
                    alias: "m01-mouth-neutral01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-neutral01.webp",
                },
                {
                    alias: "m01-mouth-smile00",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-smile00.webp",
                },
                {
                    alias: "m01-mouth-smile01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-smile01.webp",
                },
                {
                    alias: "m01-mouth-wow01",
                    src: "https://raw.githubusercontent.com/DRincs-Productions/pixi-vn-bucket/refs/heads/main/breakdown/m01/m01-mouth-wow01.webp",
                },
            ],
        },
    ],
};
export default manifest;
```

```ts tab="utils/defineAssets.ts"
import { Assets } from "@drincs/pixi-vn";
import manifest from "../assets/manifest";

/**
 * Define all the assets that will be used in the game.
 * This function will be called before the game starts.
 * You can read more about assets management in the documentation: https://pixi-vn.web.app/start/assets-management.html
 */
export async function defineAssets() {
    await Assets.init({ manifest });

    // The game will not start until these asserts are loaded.
    await Assets.loadBundle("main_menu");

    // The game will start immediately, but these asserts will be loaded in the background.
    // Assets.backgroundLoadBundle("main_menu");
    // Assets.backgroundLoad("background_main_menu");
}
```

```ts tab="src/main.ts"
import { Assets, canvas, Container, Game } from "@drincs/pixi-vn";
import { createRoot } from "react-dom/client";
import App from "./App";
import { CANVAS_UI_LAYER_NAME } from "./constans";
import "./index.css";
import "./values/characters";

// ...

Game.onLoadingLabel((_stepId, { id }) => { // [!code focus]
    Assets.backgroundLoadBundle(id); // [!code focus]
}); // [!code focus]
```

## A√±adir im√°genes de fondo y de personajes

Ahora es el momento de pensar tambi√©n en la parte visual. A√±adiremos las im√°genes de fondo y los sprites de los personajes al canvas de la novela visual.

**¬øQu√© es un sprite?** En gr√°ficos por ordenador, un sprite es un mapa de bits bidimensional que se integra en una escena m√°s grande, con mayor frecuencia en un videojuego 2D.

En nuestro caso, los sprites de los personajes est√°n compuestos por 3 im√°genes: el cuerpo, los ojos y la boca. Luego usamos <DynamicLink href="/start/canvas-image-container">ImageContainer</DynamicLink> para componer el personaje. Puedes encontrar m√°s informaci√≥n sobre c√≥mo a√±adir componentes al canvas en <DynamicLink href="/start/canvas-components">esta documentaci√≥n</DynamicLink>.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    async () => {
        await showImage("bg", "bg01-hallway");
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-neutral01"], { xAlign: 0.5, yAlign: 1 });
        narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` }
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-smile01"])
        narration.dialogue = { character: james, text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!` }
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-grin00"])
        narration.dialogue = { character: mc, text: `...` }
    },
    // ...
]);
export default startLabel;
```

## Carga inteligente de assets

En nuestro caso, guardamos las im√°genes del juego en un servicio de hosting (Firebase). Por esta raz√≥n, la carga de assets no es inmediata.

Para que el jugador no perciba demasiadas cargas, deber√≠amos agruparlas en ciertas fases del juego. En este ejemplo, cargar√© las im√°genes m√°s utilizadas al inicio del `label`.

Puedes encontrar m√°s informaci√≥n sobre c√≥mo gestionar las cargas <DynamicLink href="/start/assets-management">aqu√≠</DynamicLink>.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
# lazyload bundle m01 fm01 fm02 // [!code focus]

# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1 with movein direction right speed 300
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
], {
    onLoadingLabel: () => { // [!code focus]
        Assets.backgroundLoadBundle(["fm01", "fm02", "m01"]); // [!code focus]
    } // [!code focus]
});
export default startLabel;
```

## Usar transiciones

Para hacer la novela visual m√°s din√°mica, puedes usar transiciones para mostrar im√°genes. Puedes encontrar m√°s informaci√≥n sobre el uso de transiciones <DynamicLink href="/start/canvas-transition">aqu√≠</DynamicLink>.

Este es un ejemplo:

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

# show image bg bg01-hallway
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-neutral01] xAlign 0.5 yAlign 1 with movein direction right speed 300
james: You're my roommate's replacement, huh?
# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-smile01]
james: Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!
# show imagecontainer james [m01-body m01-eyes-smile m01-mouth-grin00]
mc: ...

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    async () => {
        await showImage("bg", "bg01-hallway");
        await moveIn(
            "james",
            {
                value: ["m01-body", "m01-eyes-smile", "m01-mouth-neutral01"],
                options: { xAlign: 0.5, yAlign: 1 },
            },
            { direction: "right", ease: "circInOut", type: "spring" }
        );
        narration.dialogue = { character: james, text: `You're my roommate's replacement, huh?` };
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-smile01"]);
        narration.dialogue = {
            character: james,
            text: `Don't worry, you don't have much to live up to. Just don't use heroin like the last guy, and you'll be fine!`,
        };
    },
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-smile", "m01-mouth-grin00"]);
        narration.dialogue = { character: mc, text: `...` };
    },
    // ...
]);
export default startLabel;
```

## Construir una animaci√≥n

Para hacer la novela visual m√°s din√°mica, puedes usar animaciones. Para m√°s informaci√≥n sobre c√≥mo usar animaciones, consulta <DynamicLink href="/start/canvas-animations-effects">aqu√≠</DynamicLink>.

Recomiendo usar TypeScript si necesitas configurar muchas propiedades, ya que ofrece m√°s control, m√°s funcionalidades y retroalimentaci√≥n de tipos.

En este ejemplo, mi animaci√≥n sacar√° a `steph` de la escena y la volver√° a insertar en el siguiente `step`. Tambi√©n la reflejar√© en el eje X para asegurarme de que est√© mirando en la direcci√≥n correcta.

Para sacar/introducir a `steph`, usar√© las funciones `moveOut` y `moveIn`. Para el efecto espejo, usar√© la funci√≥n `canvas.animate`.

Primero, uso la funci√≥n `canvas.animate` para crear una animaci√≥n que establece la propiedad `scaleX` de `-1` (espejado) a `1`, con `autoplay: false` para que no se inicie inmediatamente.

Luego, uso la funci√≥n `moveIn` para mover a `steph` dentro de la escena, pasando el `tickerId` de la animaci√≥n para que pueda reanudarse despu√©s de que la transici√≥n haya finalizado.

Uso la opci√≥n `completeOnContinue: true` para asegurar que la animaci√≥n se complete antes de que se ejecute el siguiente `step`. Para `moveIn`, al ser una transici√≥n, `completeOnContinue` es true por defecto.

Dado que uso TypeScript para esta animaci√≥n, cre√© un `label` para ella, de modo que tambi√©n pueda ser llamada desde otros lenguajes.

```ts title="labels/animation01.ts"
import { canvas, ImageContainer, moveIn, newLabel } from "@drincs/pixi-vn";

export const animation01 = newLabel("animation_01", [
    async () => {
        let tickerId = canvas.animate<ImageContainer>(
            "steph",
            {
                scaleX: 1,
            },
            { autoplay: false, completeOnContinue: true }
        );

        await moveIn(
            "steph",
            {
                value: ["fm02-body", "fm02-eyes-joy", "fm02-mouth-smile01"],
                options: { xAlign: 0.8, yAlign: 1, scale: { y: 1, x: -1 }, anchor: 0.5 },
            },
            { direction: "right", ease: "easeInOut", tickerIdToResume: tickerId }
        );
    },
]);
```

<Callout type="info" title="ink">

Como se explica <DynamicLink href="/ink/labels#use-the-call-script">aqu√≠</DynamicLink>, desde _ink_ puedes llamar a `labels` escritos en JS/TS y viceversa.

</Callout>

Ahora puedes llamar a este `label` (`animation_01`) desde el `label` principal (`start`).

```ink tab="ink" title="ink/start.ink" groupId="narrative_language"
=== start ===
// ...

# show imagecontainer james [m01-body m01-eyes-grin m01-mouth-grin00]
# show imagecontainer sly [fm01-body fm01-eyes-smile fm01-mouth-smile00]
# show imagecontainer steph [fm02-body fm02-eyes-upset fm02-mouth-nervous00]
# remove image steph with moveout direction left speed 300
[steph_fullname] goes through the opposite door,
# call animation_01
<> and returns with a HUGE tinfoil-covered platter.

// ...
-> DONE
```

```ts tab="Typescript" title="labels/startLabel.ts" groupId="narrative_language"
const startLabel = newLabel("start", [
    // ...
    async () => {
        await showImageContainer("james", ["m01-body", "m01-eyes-grin", "m01-mouth-grin00"]);
        await showImageContainer("sly", ["fm01-body", "fm01-eyes-smile", "fm01-mouth-smile00"]);
        await showImageContainer("steph", ["fm02-body", "fm02-eyes-upset", "fm02-mouth-nervous00"]);
        moveOut("steph", { direction: "left", speed: 300 });
        narration.dialogue = `${steph_fullname} goes through the opposite door,`;
    },
    async (props) => {
        narration.dialogGlue = true;
        narration.dialogue = ` and returns with a HUGE tinfoil-covered platter.`;
        await narration.call(animation01, props);
    },
    // ...
]);
export default startLabel;
```

<Comments>

## Add music and sound effects

This page is under construction.

:::tabs

== ink example

```ink title="ink"

```

== Typescript example

```ts

```

::: -->

</Comments>

## Conclusi√≥n

Ahora ya sabes c√≥mo crear una novela visual con Pixi‚ÄôVN. ¬°Un gran poder conlleva una gran responsabilidad, as√≠ que √∫salo sabiamente y crea una gran historia! üöÄ

Aqu√≠ tienes un ejemplo interactivo con una UI m√≠nima (HTML). Al desplazarte hacia abajo, puedes ver el mismo resultado usando una UI completa (plantilla React).

<Tabs items={["ink", "Typescript"]} groupId="narrative_language">
<Tab>
<InkVisualNovelExample />
</Tab>
<Tab>
<TSVisualNovelExample />
</Tab>
</Tabs>

<iframe src="https://pixi-vn-react-template.web.app/"
    title="Visual Novel - React"
    style={{
        width: "100%",
        height: "400px",
        border: "0",
        borderRadius: "4px",
        overflow: "hidden",
    }}
    allowFullScreen={true}
></iframe>
