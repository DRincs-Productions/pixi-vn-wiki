---
title: How translate the visual novel?
---
import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';

In visual novels, or other types of games, it is common to have the ability to select the game language.

In your Pixiâ€™VN project you need to use external libraries to handle translations. So you are free to choose the implementation that suits you best.

The most used library and compatible with many frameworks is i18next.

![i18next-h2](/i18next.svg)

## i18next

**What is i18next?** i18next is an internationalization-framework written in and for JavaScript. In order to use i18n you need to install and initialize it. You can learn more about i18next on the [i18next website](https://www.i18next.com/).

The translations will be inserted into multiple json files (one json file for each language) with the key value correspondence. Where the key is a unique key of the text (or the text to be translated) and the value is the text that will be displayed.

```ts tab="i18n.ts"
import i18n from 'i18next';
import LanguageDetector from 'i18next-browser-languagedetector';
import { initReactI18next } from 'react-i18next';
import strings_en from '../src/values/translations/strings_en.json';
import strings_es from '../src/values/translations/strings_es.json';

const getUserLang = (): string => {
    let userLang: string = navigator.language || "en";
    return userLang?.toLocaleLowerCase()?.split("-")[0];
}

export const useI18n = () => {
    if (!i18n.isInitialized) {
        i18n
            .use(LanguageDetector)
            .use(initReactI18next)
            .init({
                debug: false,
                fallbackLng: 'en',
                lng: getUserLang(),
                interpolation: {
                    escapeValue: false,
                },
                resources: {
                    en: strings_en,
                    es: strings_es,
                    // Add more languages here
                }
            });
    }
}
```

```ts tab="main.ts"
import { useI18n } from './i18n';

useI18n()
```

<Accordions>

<Accordion title="Translate the UI" id="translate-ui">

To translate the UI, you need to use the `t` function that is provided by i18next. The `t` function is a function that will be called by passing the key as input to get the corresponding text in the player's language.

For example:

```tsx tab="React"
import { useTranslation } from 'react-i18next';

export default function MyComponent() {
    const { t } = useTranslation("ui");

    return (
        <div>
            <Button>{t("text_speed")}</Button>
        </div>
    );
}
```

```vue tab="Vue"
<script setup>
    import { useTranslation } from "i18next-vue";
    const { t } = useTranslation("ui");
</script>

<template>
    <div>
        <button>{{ t('text_speed') }}</button>
    </div>
</template>
```

```svelte tab="Svelte"
<script>
    import { useTranslation } from 'svelte-i18n';
    const { t } = useTranslation("ui");
</script>

<div>
    <button>{t('text_speed')}</button>
</div>
```

</Accordion>

<Accordion title="Translate the narration" id="Translate the narration (TypeScript/JavaScript)">

<Callout title="Templates" type="info">

In all templates, the `StepLabelProps` interface is already extended to include a `t` function. You can find it in the `pixi-vn.d.ts` file.

</Callout>

<Callout type="info">

It is recommended to use `t` inside the <DynamicLink href="/start/labels">label</DynamicLink> and not when the UI is displayed, because this way you can use the [i18n Interpolation](https://i18next.com/translation-function/interpolation).

</Callout>

In pixi-vn projects, it's very common to need to translate the narration text into the TypeScript/JavaScript <DynamicLink href="/start/labels">`labels`</DynamicLink>. To enable this, the translate function must be included in the <DynamicLink href="/start/labels#steplabelprops">`StepLabelProps` interface</DynamicLink>.

Is recommended to use as translation key the native string from which the translation is made.

```ts tab="labels/startLabel.ts"
export const startLabel = newLabel("start_label",
    [
        ({ t }) => { // [!code focus]
            narration.dialogue = {
                character: liam,
                text: t("Hello, my name is {{name}}", { name: "Liam" }) // [!code focus]
            }
        },
    ]
)
```

```ts tab="pixi-vn.d.ts"
declare module '@drincs/pixi-vn' {
    interface StepLabelProps {
        /**
         * Translate a key to a string.
         * @param key The key to translate.
         * @returns The translated string.
         */
        t: TFunction<[string], undefined>
        // ...
    }
}
```

</Accordion>

</Accordions>

## Create the json file to translate

It is recommended to split the translations into two parts (see `strings_es.json` file):

- The <DynamicLink href="/start/interface">UI</DynamicLink> texts, that is, the texts that are contained in screens, settings, quick buttons, etc... that is, everything that is not part of the narration.
- The <DynamicLink href="/start/narration">narration</DynamicLink> texts, i.e. the texts contained in the dialogues, in the choice menu, etc...

```json tab="locales/strings_es.json"
{
    "ui": {
        "text_speed": "Velocidad del texto",
        // ...
    },
    "narration": {
        "Hello, my name is {{name}}": "Hola, mi nombre es {{name}}"
        // ...
    }
}
```
