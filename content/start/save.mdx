---
title: Save and load
---

The save and load system is a feature that allows the player to save the game progress and load it later. This feature is essential for visual novels, as it allows the player to continue the story from where they left off.

## Create

To create a save, you can use the `Game.exportGameState` function. This function returns an object with the game data, which you can then save to a file or a database.

My advice is to insert the generated file in question with other information created by the user, such as the name of the save, the date of creation, and an image of the current game state.

<Callout type="info">

For generate the image, you can use the `canvas.extractImage()` function, which returns a base64 string of the current game state. You can then use this string to create an image file.

</Callout>

For example:

```ts tab="utils/save-utility.ts"
import { Game } from "@drincs/pixi-vn";
import GameSaveData from "../models/GameSaveData";

export function createGameSave(options?: { image?: string; name?: string }): GameSaveData {
    const { image, name = "" } = options || {};
    return {
        saveData: Game.exportGameState(),
        gameVersion: __APP_VERSION__,
        date: new Date(),
        name: name,
        image: image,
    };
}
```

```ts tab="models/GameSaveData.ts"
import { GameState } from "@drincs/pixi-vn";

export default interface GameSaveData {
    saveData: GameState;
    gameVersion: string;
    date: Date;
    name: string;
    image?: string;
}
```

## Load

To load a save, you can use the `Game.restoreGameState` function. This function takes the save data object as a parameter and restores the game state to the saved state.

For example:

```ts tab="utils/load-utility.ts"
import { Game } from "@drincs/pixi-vn";
import { LOADING_ROUTE } from "../constans";
import GameSaveData from "../models/GameSaveData";

export async function loadSave(saveData: GameSaveData, navigate: NavigateFunction) {
    await navigate(LOADING_ROUTE);
    await Game.restoreGameState(saveData.saveData, navigate);
}
```
