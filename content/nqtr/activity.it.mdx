---
title: Activity
---

import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';

The `activity` are actions the player can take, and they can be linked to a <DynamicLink href="/nqtr/navigation">navigation element</DynamicLink>. The developer will decide how the player interacts with them.

## Inizializzare

To initialize a `activity`, create a new instance of the `ActivityBaseModel` class (or your [custom class](#custom-class)) and add it to the game activity dictionary when the game is initialized.

<Callout type="info">

It is recommended to import the instances at project startup, see the `src/main.ts` file.

</Callout>

To create a new instance of `ActivityBaseModel`, you need the following parameters:

- `id`: Un identificatore univoco (stringa). Used to reference the `activity` in the game (must be unique).
- `onRun`: A function that is called when the `activity` is run. It receives two parameters:
  - The `activity` instance itself.
  - `props`: the properties that will be passed to the activity. Its interface corresponds to [`OnRunProps`](#override-onrunprops).
- `props`: An object with the activity's properties:
  - `name`: The name of the activity (optional).
  - `timeSlot`: The time slot in which the activity will be active (optional).
  - `dateScheduling`: Used to schedule what date it will be added and removed (optional).
  - `disabled`: Whether the activity is disabled. You can also pass a Pixi'VN flag name (optional, default is `false`).
  - `hidden`: Whether the activity is hidden. You can also pass a Pixi'VN flag name (optional, default is `false`).
  - `renderIcon`: The icon of the activity (optional).

```ts tab="values/activities.ts"
import { ActivityBaseModel, RegisteredActivities, timeTracker } from "@drincs/nqtr";
import { narration } from "@drincs/pixi-vn";
import { napLabel, sleepLabel } from "../labels/sleepNapLabels";
import { orderProductLabel, takeKeyLabel } from "../labels/variousActionsLabels";

export const bed = new ActivityBaseModel(
    "bed",
    async (_, props) => {
        if (timeTracker.nowIsBetween(5, 22)) {
            await narration.jumpLabel(napLabel, props);
        } else {
            await narration.jumpLabel(sleepLabel, props);
        }
    },
    {
        name: "bed",
    }
);

export const orderProduct = new ActivityBaseModel(
    "order_product",
    async (_, props) => await narration.jumpLabel(orderProductLabel, props),
    {
        name: "order_product",
    }
);

export const takeProduct = new ActivityBaseModel(
    "take_product",
    async (_, props) => await narration.jumpLabel(takeKeyLabel, props),
    {
        name: "take_product",
    }
);

RegisteredActivities.add([bed, orderProduct, takeProduct]);
```

```ts tab="src/main.ts"
import "./values/activities";

// ...
```

`RegisteredActivities.add` is **required** to save the `activities` in the game.

You can also create a function to load `activities`. The important thing is that it is called at least once before the `activities` are used in the game, otherwise they will not be available.

## Link

To link an activity to a <DynamicLink href="/nqtr/navigation">navigation element</DynamicLink>, you have two options:

- Link it during navigation element initialization
- Link it during the game

### During navigation element initialization

When the game starts, a list of related activities will be defined. This list will not be saved when the game is saved. Therefore, the developer can modify this list from one version of the game to another without having to worry about migrations for older versions.

```ts tab="values/rooms.ts"
import { RegisteredRooms, RoomBaseModel } from "@drincs/nqtr";
import { bed } from "./activity";
import { mcHome } from "./locations";

export const mcRoom = new RoomBaseModel("mc_room", mcHome, {
    name: "MC room",
    image: "location_myroom",
    activities: [bed],
});

RegisteredRooms.add([mcRoom]);
```

```ts tab="values/activities.ts"
import { ActivityBaseModel, RegisteredActivities, timeTracker } from "@drincs/nqtr";
import { narration } from "@drincs/pixi-vn";
import { napLabel, sleepLabel } from "../labels/sleepNapLabels";

export const bed = new ActivityBaseModel(
    "bed",
    async (_, props) => {
        if (timeTracker.nowIsBetween(5, 22)) {
            await narration.jumpLabel(napLabel, props);
        } else {
            await narration.jumpLabel(sleepLabel, props);
        }
    },
    {
        name: "bed",
    }
);

RegisteredActivities.add([bed]);
```

### During the game

You can also link an activity to a navigation element during the game. This feature is useful if you want to temporarily add an activity. The list of activities added this way will be included in your game saves.

To link an activity to a navigation element during the game, you can use the `addActivity` method.

```ts tab="Example"
import { orderProduct } from "../activities";
import { mcRoom } from "../rooms";

mcRoom.addActivity(orderProduct);
```

```ts tab="values/activities.ts"
import { ActivityBaseModel, RegisteredActivities } from "@drincs/nqtr";
import { narration } from "@drincs/pixi-vn";
import { orderProductLabel } from "../labels/variousActionsLabels";

export const orderProduct = new ActivityBaseModel(
    "order_product",
    async (_, props) => await narration.jumpLabel(orderProductLabel, props),
    {
        name: "order_product",
    }
);

RegisteredActivities.add([orderProduct]);
```

```ts tab="values/rooms.ts"
import { RegisteredRooms, RoomBaseModel } from "@drincs/nqtr";
import { mcHome } from "./locations";

export const mcRoom = new RoomBaseModel("mc_room", mcHome, {
    name: "MC room",
    image: "location_myroom",
});

RegisteredRooms.add([mcRoom]);
```

## Unlink

To unlink an activity from a navigation element, you can use the `removeActivity` method.

```ts tab="Example"
import { orderProduct } from "../activities";
import { mcRoom } from "../rooms";

mcRoom.removeActivity(orderProduct);
```

```ts tab="values/activities.ts"
import { ActivityBaseModel, RegisteredActivities } from "@drincs/nqtr";
import { narration } from "@drincs/pixi-vn";
import { orderProductLabel } from "../labels/variousActionsLabels";

export const orderProduct = new ActivityBaseModel(
    "order_product",
    async (_, props) => await narration.jumpLabel(orderProductLabel, props),
    {
        name: "order_product",
    }
);

RegisteredActivities.add([orderProduct]);
```

```ts tab="values/rooms.ts"
import { RegisteredRooms, RoomBaseModel } from "@drincs/nqtr";
import { mcHome } from "./locations";

export const mcRoom = new RoomBaseModel("mc_room", mcHome, {
    name: "MC room",
    image: "location_myroom",
});

RegisteredRooms.add([mcRoom]);
```

## Ottieni

To get a `activity` by its `id`, use the `RegisteredActivities.get` function.

```ts
import { RegisteredActivities } from "@drincs/nqtr";

const orderProduct = RegisteredActivities.get('order_product');
```

## Ottieni tutti

To get all `activities`, use the `RegisteredActivities.values` function.

```ts
import { RegisteredActivities } from "@drincs/nqtr";

const activities = RegisteredActivities.values();
```

## Classe personalizzata
